!function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function s(){return Object.create(null)}function r(e){e.forEach(n)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let a;function l(e,t){return e===t||(a||(a=document.createElement("a")),a.href=t,e===a.href)}function c(t,...n){if(null==t){for(const e of n)e(void 0);return e}const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function h(e,t,n){e.$$.on_destroy.push(c(t,n))}const u="undefined"!=typeof window;let p=u?()=>window.performance.now():()=>Date.now(),d=u?e=>requestAnimationFrame(e):e;const g=new Set;function f(e){g.forEach((t=>{t.c(e)||(g.delete(t),t.f())})),0!==g.size&&d(f)}function m(e,t){e.appendChild(t)}function b(e,t,n){const s=y(e);if(!s.getElementById(t)){const e=k("style");e.id=t,e.textContent=n,x(s,e)}}function y(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function v(e){const t=k("style");return t.textContent="/* empty */",x(y(e),t),t.sheet}function x(e,t){return m(e.head||e,t),t.sheet}function w(e,t,n){e.insertBefore(t,n||null)}function $(e){e.parentNode&&e.parentNode.removeChild(e)}function k(e){return document.createElement(e)}function T(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function _(e){return document.createTextNode(e)}function E(){return _(" ")}function B(){return _("")}function A(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function I(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function C(e,t){t=""+t,e.data!==t&&(e.data=t)}function M(e,t){e.value=null==t?"":t}function S(e,t,n,s){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function O(e,t,n){e.classList.toggle(t,!!n)}function H(e,t,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:s})}class R{is_svg=!1;e=void 0;n=void 0;t=void 0;a=void 0;constructor(e=!1){this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=T(t.nodeName):this.e=k(11===t.nodeType?"TEMPLATE":t.nodeName),this.t="TEMPLATE"!==t.tagName?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)w(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($)}}const L=new Map;let P,N=0;function D(e,t,n,s,r,o,i,a=0){const l=16.666/s;let c="{\n";for(let e=0;e<=1;e+=l){const s=t+(n-t)*o(e);c+=100*e+`%{${i(s,1-s)}}\n`}const h=c+`100% {${i(n,1-n)}}\n}`,u=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(h)}_${a}`,p=y(e),{stylesheet:d,rules:g}=L.get(p)||function(e,t){const n={stylesheet:v(t),rules:{}};return L.set(e,n),n}(p,e);g[u]||(g[u]=!0,d.insertRule(`@keyframes ${u} ${h}`,d.cssRules.length));const f=e.style.animation||"";return e.style.animation=`${f?`${f}, `:""}${u} ${s}ms linear ${r}ms 1 both`,N+=1,u}function U(e,t){const n=(e.style.animation||"").split(", "),s=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-s.length;r&&(e.style.animation=s.join(", "),N-=r,N||d((()=>{N||(L.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&$(t)})),L.clear())})))}function z(e){P=e}function j(){if(!P)throw new Error("Function called outside component initialization");return P}function F(e){j().$$.on_mount.push(e)}function G(){const e=j();return(t,n,{cancelable:s=!1}={})=>{const r=e.$$.callbacks[t];if(r){const o=H(t,n,{cancelable:s});return r.slice().forEach((t=>{t.call(e,o)})),!o.defaultPrevented}return!0}}const q=[],V=[];let X=[];const Q=[],K=Promise.resolve();let Z=!1;function Y(){Z||(Z=!0,K.then(se))}function W(){return Y(),K}function J(e){X.push(e)}const ee=new Set;let te,ne=0;function se(){if(0!==ne)return;const e=P;do{try{for(;ne<q.length;){const e=q[ne];ne++,z(e),re(e.$$)}}catch(e){throw q.length=0,ne=0,e}for(z(null),q.length=0,ne=0;V.length;)V.pop()();for(let e=0;e<X.length;e+=1){const t=X[e];ee.has(t)||(ee.add(t),t())}X.length=0}while(q.length);for(;Q.length;)Q.pop()();Z=!1,ee.clear(),z(e)}function re(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}function oe(e,t,n){e.dispatchEvent(H(`${t?"intro":"outro"}${n}`))}const ie=new Set;let ae;function le(){ae={r:0,c:[],p:ae}}function ce(){ae.r||r(ae.c),ae=ae.p}function he(e,t){e&&e.i&&(ie.delete(e),e.i(t))}function ue(e,t,n,s){if(e&&e.o){if(ie.has(e))return;ie.add(e),ae.c.push((()=>{ie.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}else s&&s()}const pe={duration:0};function de(n,s,i,a){let l,c=s(n,i,{direction:"both"}),h=a?0:1,u=null,m=null,b=null;function y(){b&&U(n,b)}function v(e,t){const n=e.b-h;return t*=Math.abs(n),{a:h,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function x(s){const{delay:o=0,duration:i=300,easing:a=t,tick:x=e,css:w}=c||pe,$={start:p()+o,b:s};s||($.group=ae,ae.r+=1),"inert"in n&&(s?void 0!==l&&(n.inert=l):(l=n.inert,n.inert=!0)),u||m?m=$:(w&&(y(),b=D(n,h,s,i,o,a,w)),s&&x(0,1),u=v($,i),J((()=>oe(n,s,"start"))),function(e){let t;0===g.size&&d(f),new Promise((n=>{g.add(t={c:e,f:n})}))}((e=>{if(m&&e>m.start&&(u=v(m,i),m=null,oe(n,u.b,"start"),w&&(y(),b=D(n,h,u.b,u.duration,0,a,c.css))),u)if(e>=u.end)x(h=u.b,1-h),oe(n,u.b,"end"),m||(u.b?y():--u.group.r||r(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;h=u.a+u.d*a(t/u.duration),x(h,1-h)}return!(!u&&!m)})))}return{run(e){o(c)?(te||(te=Promise.resolve(),te.then((()=>{te=null}))),te).then((()=>{c=c({direction:e?"in":"out"}),x(e)})):x(e)},end(){y(),u=m=null}}}function ge(e){return void 0!==e?.length?e:Array.from(e)}function fe(e,t){e.d(1),t.delete(e.key)}function me(e,t){ue(e,1,1,(()=>{t.delete(e.key)}))}function be(e,t,n,s,o,i,a,l,c,h,u,p){let d=e.length,g=i.length,f=d;const m={};for(;f--;)m[e[f].key]=f;const b=[],y=new Map,v=new Map,x=[];for(f=g;f--;){const e=p(o,i,f),s=n(e);let r=a.get(s);r?x.push((()=>r.p(e,t))):(r=h(s,e),r.c()),y.set(s,b[f]=r),s in m&&v.set(s,Math.abs(f-m[s]))}const w=new Set,$=new Set;function k(e){he(e,1),e.m(l,u),a.set(e.key,e),u=e.first,g--}for(;d&&g;){const t=b[g-1],n=e[d-1],s=t.key,r=n.key;t===n?(u=t.first,d--,g--):y.has(r)?!a.has(s)||w.has(s)?k(t):$.has(r)?d--:v.get(s)>v.get(r)?($.add(s),k(t)):(w.add(r),d--):(c(n,a),d--)}for(;d--;){const t=e[d];y.has(t.key)||c(t,a)}for(;g;)k(b[g-1]);return r(x),b}function ye(e){e&&e.c()}function ve(e,t,s){const{fragment:i,after_update:a}=e.$$;i&&i.m(t,s),J((()=>{const t=e.$$.on_mount.map(n).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...t):r(t),e.$$.on_mount=[]})),a.forEach(J)}function xe(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];X.forEach((s=>-1===e.indexOf(s)?t.push(s):n.push(s))),n.forEach((e=>e())),X=t}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function we(t,n,o,i,a,l,c=null,h=[-1]){const u=P;z(t);const p=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(u?u.$$.context:[])),callbacks:s(),dirty:h,skip_bound:!1,root:n.target||u.$$.root};c&&c(p.root);let d=!1;if(p.ctx=o?o(t,n.props||{},((e,n,...s)=>{const r=s.length?s[0]:n;return p.ctx&&a(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),d&&function(e,t){-1===e.$$.dirty[0]&&(q.push(e),Y(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],p.update(),d=!0,r(p.before_update),p.fragment=!!i&&i(p.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach($)}else p.fragment&&p.fragment.c();n.intro&&he(t.$$.fragment),ve(t,n.target,n.anchor),se()}z(u)}let $e;function ke(e,t,n,s){const r=n[e]?.type;if(t="Boolean"===r&&"boolean"!=typeof t?null!=t:t,!s||!n[e])return t;if("toAttribute"===s)switch(r){case"Object":case"Array":return null==t?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return null==t?null:t;default:return t}else switch(r){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":default:return t;case"Number":return null!=t?+t:t}}function Te(e,t,n,s,r,o){let i=class extends $e{constructor(){super(e,n,r),this.$$p_d=t}static get observedAttributes(){return Object.keys(t).map((e=>(t[e].attribute||e).toLowerCase()))}};return Object.keys(t).forEach((e=>{Object.defineProperty(i.prototype,e,{get(){return this.$$c&&e in this.$$c?this.$$c[e]:this.$$d[e]},set(n){n=ke(e,n,t),this.$$d[e]=n,this.$$c?.$set({[e]:n})}})})),s.forEach((e=>{Object.defineProperty(i.prototype,e,{get(){return this.$$c?.[e]}})})),e.element=i,i}"function"==typeof HTMLElement&&($e=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(e,t,n){super(),this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const n=this.$$c.$on(e,t);this.$$l_u.set(t,n)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const e=this.$$l_u.get(t);e&&(e(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){if(await Promise.resolve(),!this.$$cn||this.$$c)return;function e(e){return()=>{let t;return{c:function(){t=k("slot"),"default"!==e&&I(t,"name",e)},m:function(e,n){w(e,t,n)},d:function(e){e&&$(t)}}}}const t={},n=function(e){const t={};return e.childNodes.forEach((e=>{t[e.slot||"default"]=!0})),t}(this);for(const r of this.$$s)r in n&&(t[r]=[e(r)]);for(const o of this.attributes){const i=this.$$g_p(o.name);i in this.$$d||(this.$$d[i]=ke(i,o.value,this.$$p_d,"toProp"))}for(const a in this.$$p_d)a in this.$$d||void 0===this[a]||(this.$$d[a]=this[a],delete this[a]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});const s=()=>{this.$$r=!0;for(const e in this.$$p_d)if(this.$$d[e]=this.$$c.$$.ctx[this.$$c.$$.props[e]],this.$$p_d[e].reflect){const t=ke(e,this.$$d[e],this.$$p_d,"toAttribute");null==t?this.removeAttribute(this.$$p_d[e].attribute||e):this.setAttribute(this.$$p_d[e].attribute||e,t)}this.$$r=!1};this.$$c.$$.after_update.push(s),s();for(const l in this.$$l)for(const c of this.$$l[l]){const h=this.$$c.$on(l,c);this.$$l_u.set(c,h)}this.$$l={}}}attributeChangedCallback(e,t,n){this.$$r||(e=this.$$g_p(e),this.$$d[e]=ke(e,n,this.$$p_d,"toProp"),this.$$c?.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then((()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)}))}$$g_p(e){return Object.keys(this.$$p_d).find((t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e))||e}});class _e{$$=void 0;$$set=void 0;$destroy(){xe(this,1),this.$destroy=e}$on(t,n){if(!o(n))return e;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const e=s.indexOf(n);-1!==e&&s.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ee=[];function Be(t,n=e){let s;const r=new Set;function o(e){if(i(t,e)&&(t=e,s)){const e=!Ee.length;for(const e of r)e[1](),Ee.push(e,t);if(e){for(let e=0;e<Ee.length;e+=2)Ee[e][0](Ee[e+1]);Ee.length=0}}}function a(e){o(e(t))}return{set:o,update:a,subscribe:function(i,l=e){const c=[i,l];return r.add(c),1===r.size&&(s=n(o,a)||e),i(t),()=>{r.delete(c),0===r.size&&s&&(s(),s=null)}}}}function Ae(t,n,s){const i=!Array.isArray(t),a=i?[t]:t;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=n.length<2;return function(e,t){return{subscribe:Be(e,t).subscribe}}(s,((t,s)=>{let h=!1;const u=[];let p=0,d=e;const g=()=>{if(p)return;d();const r=n(i?u[0]:u,t,s);l?t(r):d=o(r)?r:e},f=a.map(((e,t)=>c(e,(e=>{u[t]=e,p&=~(1<<t),h&&g()}),(()=>{p|=1<<t}))));return h=!0,g(),function(){r(f),d(),h=!1}}))}function Ie(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ce=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===Me}(e)}(e)};var Me="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Se(e,t){return!1!==t.clone&&t.isMergeableObject(e)?Pe((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function Oe(e,t,n){return e.concat(t).map((function(e){return Se(e,n)}))}function He(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function Re(e,t){try{return t in e}catch(e){return!1}}function Le(e,t,n){var s={};return n.isMergeableObject(e)&&He(e).forEach((function(t){s[t]=Se(e[t],n)})),He(t).forEach((function(r){(function(e,t){return Re(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,r)||(Re(e,r)&&n.isMergeableObject(t[r])?s[r]=function(e,t){if(!t.customMerge)return Pe;var n=t.customMerge(e);return"function"==typeof n?n:Pe}(r,n)(e[r],t[r],n):s[r]=Se(t[r],n))})),s}function Pe(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||Oe,n.isMergeableObject=n.isMergeableObject||Ce,n.cloneUnlessOtherwiseSpecified=Se;var s=Array.isArray(t);return s===Array.isArray(e)?s?n.arrayMerge(e,t,n):Le(e,t,n):Se(t,n)}Pe.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return Pe(e,n,t)}),{})};var Ne=Ie(Pe),De=function(e,t){return De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},De(e,t)};function Ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}De(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ze=function(){return ze=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},ze.apply(this,arguments)};function je(e,t,n){if(n||2===arguments.length)for(var s,r=0,o=t.length;r<o;r++)!s&&r in t||(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Fe(e,t){var n=t&&t.cache?t.cache:Je,s=t&&t.serializer?t.serializer:Ye;return(t&&t.strategy?t.strategy:Xe)(e,{cache:n,serializer:s})}function Ge(e,t,n,s){var r=function(e){return null==e||"number"==typeof e||"boolean"==typeof e}(s)?s:n(s),o=t.get(r);return void 0===o&&(o=e.call(this,s),t.set(r,o)),o}function qe(e,t,n){var s=Array.prototype.slice.call(arguments,3),r=n(s),o=t.get(r);return void 0===o&&(o=e.apply(this,s),t.set(r,o)),o}function Ve(e,t,n,s,r){return n.bind(t,e,s,r)}function Xe(e,t){return Ve(e,this,1===e.length?Ge:qe,t.cache.create(),t.serializer)}"function"==typeof SuppressedError&&SuppressedError;var Qe,Ke,Ze,Ye=function(){return JSON.stringify(arguments)},We=function(){function e(){this.cache=Object.create(null)}return e.prototype.get=function(e){return this.cache[e]},e.prototype.set=function(e,t){this.cache[e]=t},e}(),Je={create:function(){return new We}},et={variadic:function(e,t){return Ve(e,this,qe,t.cache.create(),t.serializer)},monadic:function(e,t){return Ve(e,this,Ge,t.cache.create(),t.serializer)}};function tt(e){return e.type===Ke.literal}function nt(e){return e.type===Ke.argument}function st(e){return e.type===Ke.number}function rt(e){return e.type===Ke.date}function ot(e){return e.type===Ke.time}function it(e){return e.type===Ke.select}function at(e){return e.type===Ke.plural}function lt(e){return e.type===Ke.pound}function ct(e){return e.type===Ke.tag}function ht(e){return!(!e||"object"!=typeof e||e.type!==Ze.number)}function ut(e){return!(!e||"object"!=typeof e||e.type!==Ze.dateTime)}!function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(Qe||(Qe={})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(Ke||(Ke={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(Ze||(Ze={}));var pt=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,dt=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function gt(e){var t={};return e.replace(dt,(function(e){var n=e.length;switch(e[0]){case"G":t.era=4===n?"long":5===n?"narrow":"short";break;case"y":t.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===n?"long":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][n-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][n-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][n-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][n-1];break;case"s":t.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),t}var ft=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;var mt=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,bt=/^(@+)?(\+|#+)?[rs]?$/g,yt=/(\*)(0+)|(#+)(0+)|(0+)/g,vt=/^(0+)$/;function xt(e){var t={};return"r"===e[e.length-1]?t.roundingPriority="morePrecision":"s"===e[e.length-1]&&(t.roundingPriority="lessPrecision"),e.replace(bt,(function(e,n,s){return"string"!=typeof s?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===s?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"==typeof s?s.length:0)),""})),t}function wt(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function $t(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if("+!"===n?(t.signDisplay="always",e=e.slice(2)):"+?"===n&&(t.signDisplay="exceptZero",e=e.slice(2)),!vt.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function kt(e){var t=wt(e);return t||{}}function Tt(e){for(var t={},n=0,s=e;n<s.length;n++){var r=s[n];switch(r.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=r.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=r.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=ze(ze(ze({},t),{notation:"scientific"}),r.options.reduce((function(e,t){return ze(ze({},e),kt(t))}),{}));continue;case"engineering":t=ze(ze(ze({},t),{notation:"engineering"}),r.options.reduce((function(e,t){return ze(ze({},e),kt(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(r.options[0]);continue;case"rounding-mode-floor":t.roundingMode="floor";continue;case"rounding-mode-ceiling":t.roundingMode="ceil";continue;case"rounding-mode-down":t.roundingMode="trunc";continue;case"rounding-mode-up":t.roundingMode="expand";continue;case"rounding-mode-half-even":t.roundingMode="halfEven";continue;case"rounding-mode-half-down":t.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":t.roundingMode="halfExpand";continue;case"integer-width":if(r.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");r.options[0].replace(yt,(function(e,n,s,r,o,i){if(n)t.minimumIntegerDigits=s.length;else{if(r&&o)throw new Error("We currently do not support maximum integer digits");if(i)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(vt.test(r.stem))t.minimumIntegerDigits=r.stem.length;else if(mt.test(r.stem)){if(r.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");r.stem.replace(mt,(function(e,n,s,r,o,i){return"*"===s?t.minimumFractionDigits=n.length:r&&"#"===r[0]?t.maximumFractionDigits=r.length:o&&i?(t.minimumFractionDigits=o.length,t.maximumFractionDigits=o.length+i.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),""}));var o=r.options[0];"w"===o?t=ze(ze({},t),{trailingZeroDisplay:"stripIfInteger"}):o&&(t=ze(ze({},t),xt(o)))}else if(bt.test(r.stem))t=ze(ze({},t),xt(r.stem));else{var i=wt(r.stem);i&&(t=ze(ze({},t),i));var a=$t(r.stem);a&&(t=ze(ze({},t),a))}}return t}var _t,Et={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function Bt(e){var t=e.hourCycle;if(void 0===t&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n,s=e.language;return"root"!==s&&(n=e.maximize().region),(Et[n||""]||Et[s||""]||Et["".concat(s,"-001")]||Et["001"])[0]}var At=new RegExp("^".concat(pt.source,"*")),It=new RegExp("".concat(pt.source,"*$"));function Ct(e,t){return{start:e,end:t}}var Mt=!!String.prototype.startsWith&&"_a".startsWith("a",1),St=!!String.fromCodePoint,Ot=!!Object.fromEntries,Ht=!!String.prototype.codePointAt,Rt=!!String.prototype.trimStart,Lt=!!String.prototype.trimEnd,Pt=!!Number.isSafeInteger?Number.isSafeInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},Nt=!0;try{Nt="a"===(null===(_t=Vt("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===_t?void 0:_t[0])}catch(e){Nt=!1}var Dt,Ut=Mt?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},zt=St?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,s="",r=e.length,o=0;r>o;){if((n=e[o++])>1114111)throw RangeError(n+" is not a valid code point");s+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320)}return s},jt=Ot?Object.fromEntries:function(e){for(var t={},n=0,s=e;n<s.length;n++){var r=s[n],o=r[0],i=r[1];t[o]=i}return t},Ft=Ht?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var s,r=e.charCodeAt(t);return r<55296||r>56319||t+1===n||(s=e.charCodeAt(t+1))<56320||s>57343?r:s-56320+(r-55296<<10)+65536}},Gt=Rt?function(e){return e.trimStart()}:function(e){return e.replace(At,"")},qt=Lt?function(e){return e.trimEnd()}:function(e){return e.replace(It,"")};function Vt(e,t){return new RegExp(e,t)}if(Nt){var Xt=Vt("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Dt=function(e,t){var n;return Xt.lastIndex=t,null!==(n=Xt.exec(e)[1])&&void 0!==n?n:""}}else Dt=function(e,t){for(var n=[];;){var s=Ft(e,t);if(void 0===s||Yt(s)||Wt(s))break;n.push(s),t+=s>=65536?2:1}return zt.apply(void 0,n)};var Qt,Kt=function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,n){for(var s=[];!this.isEOF();){var r=this.char();if(123===r){if((o=this.parseArgument(e,n)).err)return o;s.push(o.val)}else{if(125===r&&e>0)break;if(35!==r||"plural"!==t&&"selectordinal"!==t){if(60===r&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(Qe.UNMATCHED_CLOSING_TAG,Ct(this.clonePosition(),this.clonePosition()))}if(60===r&&!this.ignoreTag&&Zt(this.peek()||0)){if((o=this.parseTag(e,t)).err)return o;s.push(o.val)}else{var o;if((o=this.parseLiteral(e,t)).err)return o;s.push(o.val)}}else{var i=this.clonePosition();this.bump(),s.push({type:Ke.pound,location:Ct(i,this.clonePosition())})}}}return{val:s,err:null}},e.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var s=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Ke.literal,value:"<".concat(s,"/>"),location:Ct(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var r=this.parseMessage(e+1,t,!0);if(r.err)return r;var o=r.val,i=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Zt(this.char()))return this.error(Qe.INVALID_TAG,Ct(i,this.clonePosition()));var a=this.clonePosition();return s!==this.parseTagName()?this.error(Qe.UNMATCHED_CLOSING_TAG,Ct(a,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Ke.tag,value:s,children:o,location:Ct(n,this.clonePosition())},err:null}:this.error(Qe.INVALID_TAG,Ct(i,this.clonePosition())))}return this.error(Qe.UNCLOSED_TAG,Ct(n,this.clonePosition()))}return this.error(Qe.INVALID_TAG,Ct(n,this.clonePosition()))},e.prototype.parseTagName=function(){var e,t=this.offset();for(this.bump();!this.isEOF()&&(45===(e=this.char())||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039);)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),s="";;){var r=this.tryParseQuote(t);if(r)s+=r;else{var o=this.tryParseUnquoted(e,t);if(o)s+=o;else{var i=this.tryParseLeftAngleBracket();if(!i)break;s+=i}}}var a=Ct(n,this.clonePosition());return{val:{type:Ke.literal,value:s,location:a},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(Zt(e=this.peek()||0)||47===e)?null:(this.bump(),"<");var e},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}t.push(39),this.bump()}else t.push(n);this.bump()}return zt.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===t||"selectordinal"===t)||125===n&&e>0?null:(this.bump(),zt(n))},e.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Qe.EXPECT_ARGUMENT_CLOSING_BRACE,Ct(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(Qe.EMPTY_ARGUMENT,Ct(n,this.clonePosition()));var s=this.parseIdentifierIfPossible().value;if(!s)return this.error(Qe.MALFORMED_ARGUMENT,Ct(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Qe.EXPECT_ARGUMENT_CLOSING_BRACE,Ct(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Ke.argument,value:s,location:Ct(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Qe.EXPECT_ARGUMENT_CLOSING_BRACE,Ct(n,this.clonePosition())):this.parseArgumentOptions(e,t,s,n);default:return this.error(Qe.MALFORMED_ARGUMENT,Ct(n,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=Dt(this.message,t),s=t+n.length;return this.bumpTo(s),{value:n,location:Ct(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,n,s){var r,o=this.clonePosition(),i=this.parseIdentifierIfPossible().value,a=this.clonePosition();switch(i){case"":return this.error(Qe.EXPECT_ARGUMENT_TYPE,Ct(o,a));case"number":case"date":case"time":this.bumpSpace();var l=null;if(this.bumpIf(",")){this.bumpSpace();var c=this.clonePosition();if((b=this.parseSimpleArgStyleIfPossible()).err)return b;if(0===(d=qt(b.val)).length)return this.error(Qe.EXPECT_ARGUMENT_STYLE,Ct(this.clonePosition(),this.clonePosition()));l={style:d,styleLocation:Ct(c,this.clonePosition())}}if((y=this.tryParseArgumentClose(s)).err)return y;var h=Ct(s,this.clonePosition());if(l&&Ut(null==l?void 0:l.style,"::",0)){var u=Gt(l.style.slice(2));if("number"===i)return(b=this.parseNumberSkeletonFromString(u,l.styleLocation)).err?b:{val:{type:Ke.number,value:n,location:h,style:b.val},err:null};if(0===u.length)return this.error(Qe.EXPECT_DATE_TIME_SKELETON,h);var p=u;this.locale&&(p=function(e,t){for(var n="",s=0;s<e.length;s++){var r=e.charAt(s);if("j"===r){for(var o=0;s+1<e.length&&e.charAt(s+1)===r;)o++,s++;var i=1+(1&o),a=o<2?1:3+(o>>1),l=Bt(t);for("H"!=l&&"k"!=l||(a=0);a-- >0;)n+="a";for(;i-- >0;)n=l+n}else n+="J"===r?"H":r}return n}(u,this.locale));var d={type:Ze.dateTime,pattern:p,location:l.styleLocation,parsedOptions:this.shouldParseSkeletons?gt(p):{}};return{val:{type:"date"===i?Ke.date:Ke.time,value:n,location:h,style:d},err:null}}return{val:{type:"number"===i?Ke.number:"date"===i?Ke.date:Ke.time,value:n,location:h,style:null!==(r=null==l?void 0:l.style)&&void 0!==r?r:null},err:null};case"plural":case"selectordinal":case"select":var g=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Qe.EXPECT_SELECT_ARGUMENT_OPTIONS,Ct(g,ze({},g)));this.bumpSpace();var f=this.parseIdentifierIfPossible(),m=0;if("select"!==i&&"offset"===f.value){if(!this.bumpIf(":"))return this.error(Qe.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Ct(this.clonePosition(),this.clonePosition()));var b;if(this.bumpSpace(),(b=this.tryParseDecimalInteger(Qe.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Qe.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return b;this.bumpSpace(),f=this.parseIdentifierIfPossible(),m=b.val}var y,v=this.tryParsePluralOrSelectOptions(e,i,t,f);if(v.err)return v;if((y=this.tryParseArgumentClose(s)).err)return y;var x=Ct(s,this.clonePosition());return"select"===i?{val:{type:Ke.select,value:n,options:jt(v.val),location:x},err:null}:{val:{type:Ke.plural,value:n,options:jt(v.val),offset:m,pluralType:"plural"===i?"cardinal":"ordinal",location:x},err:null};default:return this.error(Qe.INVALID_ARGUMENT_TYPE,Ct(o,a))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(Qe.EXPECT_ARGUMENT_CLOSING_BRACE,Ct(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Qe.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Ct(n,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return{val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump()}}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=function(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],n=0,s=e.split(ft).filter((function(e){return e.length>0}));n<s.length;n++){var r=s[n].split("/");if(0===r.length)throw new Error("Invalid number skeleton");for(var o=r[0],i=r.slice(1),a=0,l=i;a<l.length;a++)if(0===l[a].length)throw new Error("Invalid number skeleton");t.push({stem:o,options:i})}return t}(e)}catch(e){return this.error(Qe.INVALID_NUMBER_SKELETON,t)}return{val:{type:Ze.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?Tt(n):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,n,s){for(var r,o=!1,i=[],a=new Set,l=s.value,c=s.location;;){if(0===l.length){var h=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var u=this.tryParseDecimalInteger(Qe.EXPECT_PLURAL_ARGUMENT_SELECTOR,Qe.INVALID_PLURAL_ARGUMENT_SELECTOR);if(u.err)return u;c=Ct(h,this.clonePosition()),l=this.message.slice(h.offset,this.offset())}if(a.has(l))return this.error("select"===t?Qe.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Qe.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,c);"other"===l&&(o=!0),this.bumpSpace();var p=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?Qe.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Qe.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Ct(this.clonePosition(),this.clonePosition()));var d=this.parseMessage(e+1,t,n);if(d.err)return d;var g=this.tryParseArgumentClose(p);if(g.err)return g;i.push([l,{value:d.val,location:Ct(p,this.clonePosition())}]),a.add(l),this.bumpSpace(),l=(r=this.parseIdentifierIfPossible()).value,c=r.location}return 0===i.length?this.error("select"===t?Qe.EXPECT_SELECT_ARGUMENT_SELECTOR:Qe.EXPECT_PLURAL_ARGUMENT_SELECTOR,Ct(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(Qe.MISSING_OTHER_CLAUSE,Ct(this.clonePosition(),this.clonePosition())):{val:i,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var n=1,s=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var r=!1,o=0;!this.isEOF();){var i=this.char();if(!(i>=48&&i<=57))break;r=!0,o=10*o+(i-48),this.bump()}var a=Ct(s,this.clonePosition());return r?Pt(o*=n)?{val:o,err:null}:this.error(t,a):this.error(e,a)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=Ft(this.message,e);if(void 0===t)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(Ut(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&Yt(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return null!=n?n:null},e}();function Zt(e){return e>=97&&e<=122||e>=65&&e<=90}function Yt(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function Wt(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function Jt(e){e.forEach((function(e){if(delete e.location,it(e)||at(e))for(var t in e.options)delete e.options[t].location,Jt(e.options[t].value);else st(e)&&ht(e.style)||(rt(e)||ot(e))&&ut(e.style)?delete e.style.location:ct(e)&&Jt(e.children)}))}function en(e,t){void 0===t&&(t={}),t=ze({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new Kt(e,t).parse();if(n.err){var s=SyntaxError(Qe[n.err.kind]);throw s.location=n.err.location,s.originalMessage=n.err.message,s}return(null==t?void 0:t.captureLocation)||Jt(n.val),n.val}!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(Qt||(Qt={}));var tn,nn=function(e){function t(t,n,s){var r=e.call(this,t)||this;return r.code=n,r.originalMessage=s,r}return Ue(t,e),t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),sn=function(e){function t(t,n,s,r){return e.call(this,'Invalid values for "'.concat(t,'": "').concat(n,'". Options are "').concat(Object.keys(s).join('", "'),'"'),Qt.INVALID_VALUE,r)||this}return Ue(t,e),t}(nn),rn=function(e){function t(t,n,s){return e.call(this,'Value for "'.concat(t,'" must be of type ').concat(n),Qt.INVALID_VALUE,s)||this}return Ue(t,e),t}(nn),on=function(e){function t(t,n){return e.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(n,'"'),Qt.MISSING_VALUE,n)||this}return Ue(t,e),t}(nn);function an(e){return"function"==typeof e}function ln(e,t,n,s,r,o,i){if(1===e.length&&tt(e[0]))return[{type:tn.literal,value:e[0].value}];for(var a=[],l=0,c=e;l<c.length;l++){var h=c[l];if(tt(h))a.push({type:tn.literal,value:h.value});else if(lt(h))"number"==typeof o&&a.push({type:tn.literal,value:n.getNumberFormat(t).format(o)});else{var u=h.value;if(!r||!(u in r))throw new on(u,i);var p=r[u];if(nt(h))p&&"string"!=typeof p&&"number"!=typeof p||(p="string"==typeof p||"number"==typeof p?String(p):""),a.push({type:"string"==typeof p?tn.literal:tn.object,value:p});else if(rt(h)){var d="string"==typeof h.style?s.date[h.style]:ut(h.style)?h.style.parsedOptions:void 0;a.push({type:tn.literal,value:n.getDateTimeFormat(t,d).format(p)})}else if(ot(h)){d="string"==typeof h.style?s.time[h.style]:ut(h.style)?h.style.parsedOptions:s.time.medium;a.push({type:tn.literal,value:n.getDateTimeFormat(t,d).format(p)})}else if(st(h)){(d="string"==typeof h.style?s.number[h.style]:ht(h.style)?h.style.parsedOptions:void 0)&&d.scale&&(p*=d.scale||1),a.push({type:tn.literal,value:n.getNumberFormat(t,d).format(p)})}else{if(ct(h)){var g=h.children,f=h.value,m=r[f];if(!an(m))throw new rn(f,"function",i);var b=m(ln(g,t,n,s,r,o).map((function(e){return e.value})));Array.isArray(b)||(b=[b]),a.push.apply(a,b.map((function(e){return{type:"string"==typeof e?tn.literal:tn.object,value:e}})))}if(it(h)){if(!(y=h.options[p]||h.options.other))throw new sn(h.value,p,Object.keys(h.options),i);a.push.apply(a,ln(y.value,t,n,s,r))}else if(at(h)){var y;if(!(y=h.options["=".concat(p)])){if(!Intl.PluralRules)throw new nn('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',Qt.MISSING_INTL_API,i);var v=n.getPluralRules(t,{type:h.pluralType}).select(p-(h.offset||0));y=h.options[v]||h.options.other}if(!y)throw new sn(h.value,p,Object.keys(h.options),i);a.push.apply(a,ln(y.value,t,n,s,r,p-(h.offset||0)))}else;}}}return function(e){return e.length<2?e:e.reduce((function(e,t){var n=e[e.length-1];return n&&n.type===tn.literal&&t.type===tn.literal?n.value+=t.value:e.push(t),e}),[])}(a)}function cn(e,t){return t?Object.keys(e).reduce((function(n,s){var r,o;return n[s]=(r=e[s],(o=t[s])?ze(ze(ze({},r||{}),o||{}),Object.keys(r).reduce((function(e,t){return e[t]=ze(ze({},r[t]),o[t]||{}),e}),{})):r),n}),ze({},e)):e}function hn(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(tn||(tn={}));var un=function(){function e(t,n,s,r){void 0===n&&(n=e.defaultLocale);var o=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=o.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce((function(e,t){return e.length&&t.type===tn.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return ln(o.ast,o.locales,o.formatters,o.formats,e,void 0,o.message)},this.resolvedOptions=function(){var e;return{locale:(null===(e=o.resolvedLocale)||void 0===e?void 0:e.toString())||Intl.NumberFormat.supportedLocalesOf(o.locales)[0]}},this.getAst=function(){return o.ast},this.locales=n,this.resolvedLocale=e.resolveLocale(n),"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var i=r||{};i.formatters;var a=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n}(i,["formatters"]);this.ast=e.__parse(t,ze(ze({},a),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=cn(e.formats,s),this.formatters=r&&r.formatters||function(e){return void 0===e&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Fe((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,je([void 0],t,!1)))}),{cache:hn(e.number),strategy:et.variadic}),getDateTimeFormat:Fe((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,je([void 0],t,!1)))}),{cache:hn(e.dateTime),strategy:et.variadic}),getPluralRules:Fe((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,je([void 0],t,!1)))}),{cache:hn(e.pluralRules),strategy:et.variadic})}}(this.formatterCache)}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(e){if(void 0!==Intl.Locale){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale("string"==typeof e?e:e[0])}},e.__parse=en,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();const pn={},dn=(e,t,n)=>n?(t in pn||(pn[t]={}),e in pn[t]||(pn[t][e]=n),n):n,gn=(e,t)=>{if(null==t)return;if(t in pn&&e in pn[t])return pn[t][e];const n=Fn(t);for(let s=0;s<n.length;s++){const r=yn(n[s],e);if(r)return dn(e,t,r)}};let fn;const mn=Be({});function bn(e){return e in fn}function yn(e,t){if(!bn(e))return null;const n=function(e){return fn[e]||null}(e);return function(e,t){if(null==t)return;if(t in e)return e[t];const n=t.split(".");let s=e;for(let e=0;e<n.length;e++)if("object"==typeof s){if(e>0){const t=n.slice(e,n.length).join(".");if(t in s){s=s[t];break}}s=s[n[e]]}else s=void 0;return s}(n,t)}Ae([mn],(([e])=>Object.keys(e))),mn.subscribe((e=>fn=e));const vn={};function xn(e){return vn[e]}function wn(e){return null!=e&&Fn(e).some((e=>{var t;return null==(t=xn(e))?void 0:t.size}))}function $n(e,t){const n=Promise.all(t.map((t=>(function(e,t){vn[e].delete(t),0===vn[e].size&&delete vn[e]}(e,t),t().then((e=>e.default||e))))));return n.then((t=>function(e,...t){delete pn[e],mn.update((n=>(n[e]=Ne.all([n[e]||{},...t]),n)))}(e,...t)))}const kn={};function Tn(e){if(!wn(e))return e in kn?kn[e]:Promise.resolve();const t=function(e){return Fn(e).map((e=>{const t=xn(e);return[e,t?[...t]:[]]})).filter((([,e])=>e.length>0))}(e);return kn[e]=Promise.all(t.map((([e,t])=>$n(e,t)))).then((()=>{if(wn(e))return Tn(e);delete kn[e]})),kn[e]}function _n(e,t){xn(e)||function(e){vn[e]=new Set}(e);const n=xn(e);xn(e).has(t)||(bn(e)||mn.update((t=>(t[e]={},t))),n.add(t))}var En=Object.getOwnPropertySymbols,Bn=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable;function In({locale:e,id:t}){console.warn(`[svelte-i18n] The message "${t}" was not found in "${Fn(e).join('", "')}".${wn(Gn())?"\n\nNote: there are at least one loader still registered to this locale that wasn't executed.":""}`)}const Cn={fallbackLocale:null,loadingDelay:200,formats:{number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},warnOnMissingMessages:!0,handleMissingMessage:void 0,ignoreTag:!0};function Mn(){return Cn}const Sn=Be(!1);var On=Object.defineProperty,Hn=Object.defineProperties,Rn=Object.getOwnPropertyDescriptors,Ln=Object.getOwnPropertySymbols,Pn=Object.prototype.hasOwnProperty,Nn=Object.prototype.propertyIsEnumerable,Dn=(e,t,n)=>t in e?On(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;let Un;const zn=Be(null);function jn(e){return e.split("-").map(((e,t,n)=>n.slice(0,t+1).join("-"))).reverse()}function Fn(e,t=Mn().fallbackLocale){const n=jn(e);return t?[...new Set([...n,...jn(t)])]:n}function Gn(){return null!=Un?Un:void 0}zn.subscribe((e=>{Un=null!=e?e:void 0,"undefined"!=typeof window&&null!=e&&document.documentElement.setAttribute("lang",e)}));const qn=(Vn=((e,t)=>{for(var n in t||(t={}))Pn.call(t,n)&&Dn(e,n,t[n]);if(Ln)for(var n of Ln(t))Nn.call(t,n)&&Dn(e,n,t[n]);return e})({},zn),Hn(Vn,Rn({set:e=>{if(e&&function(e){if(null==e)return;const t=Fn(e);for(let e=0;e<t.length;e++){const n=t[e];if(bn(n))return n}}(e)&&wn(e)){const{loadingDelay:t}=Mn();let n;return"undefined"!=typeof window&&null!=Gn()&&t?n=window.setTimeout((()=>Sn.set(!0)),t):Sn.set(!0),Tn(e).then((()=>{zn.set(e)})).finally((()=>{clearTimeout(n),Sn.set(!1)}))}return zn.set(e)}})));var Vn;const Xn=e=>{const t=Object.create(null);return n=>{const s=JSON.stringify(n);return s in t?t[s]:t[s]=e(n)}};var Qn=Object.defineProperty,Kn=Object.getOwnPropertySymbols,Zn=Object.prototype.hasOwnProperty,Yn=Object.prototype.propertyIsEnumerable,Wn=(e,t,n)=>t in e?Qn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jn=(e,t)=>{for(var n in t||(t={}))Zn.call(t,n)&&Wn(e,n,t[n]);if(Kn)for(var n of Kn(t))Yn.call(t,n)&&Wn(e,n,t[n]);return e},es=(e,t)=>{var n={};for(var s in e)Zn.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&Kn)for(var s of Kn(e))t.indexOf(s)<0&&Yn.call(e,s)&&(n[s]=e[s]);return n};const ts=(e,t)=>{const{formats:n}=Mn();if(e in n&&t in n[e])return n[e][t];throw new Error(`[svelte-i18n] Unknown "${t}" ${e} format.`)},ns=Xn((e=>{var t=e,{locale:n,format:s}=t,r=es(t,["locale","format"]);if(null==n)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return s&&(r=ts("number",s)),new Intl.NumberFormat(n,r)})),ss=Xn((e=>{var t=e,{locale:n,format:s}=t,r=es(t,["locale","format"]);if(null==n)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return s?r=ts("date",s):0===Object.keys(r).length&&(r=ts("date","short")),new Intl.DateTimeFormat(n,r)})),rs=Xn((e=>{var t=e,{locale:n,format:s}=t,r=es(t,["locale","format"]);if(null==n)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return s?r=ts("time",s):0===Object.keys(r).length&&(r=ts("time","short")),new Intl.DateTimeFormat(n,r)})),os=Xn(((e,t=Gn())=>new un(e,t,Mn().formats,{ignoreTag:Mn().ignoreTag}))),is=(e,t={})=>{var n,s,r,o;let i=t;"object"==typeof e&&(i=e,e=i.id);const{values:a,locale:l=Gn(),default:c}=i;if(null==l)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");let h=gn(e,l);if(h){if("string"!=typeof h)return console.warn(`[svelte-i18n] Message with id "${e}" must be of type "string", found: "${typeof h}". Gettin its value through the "$format" method is deprecated; use the "json" method instead.`),h}else h=null!=(o=null!=(r=null==(s=(n=Mn()).handleMissingMessage)?void 0:s.call(n,{locale:l,id:e,defaultValue:c}))?r:c)?o:e;if(!a)return h;let u=h;try{u=os(h,l).format(a)}catch(t){t instanceof Error&&console.warn(`[svelte-i18n] Message "${e}" has syntax error:`,t.message)}return u},as=(e,t)=>((e={})=>{var t=e,{locale:n=Gn()}=t,s=es(t,["locale"]);return rs(Jn({locale:n},s))})(t).format(e),ls=(e,t)=>((e={})=>{var t=e,{locale:n=Gn()}=t,s=es(t,["locale"]);return ss(Jn({locale:n},s))})(t).format(e),cs=(e,t)=>((e={})=>{var t=e,{locale:n=Gn()}=t,s=es(t,["locale"]);return ns(Jn({locale:n},s))})(t).format(e),hs=(e,t=Gn())=>gn(e,t),us=Ae([qn,mn],(()=>is));Ae([qn],(()=>as)),Ae([qn],(()=>ls)),Ae([qn],(()=>cs)),Ae([qn,mn],(()=>hs));var ps={widget:{title:"AI Sales Assistant",initialMessage:"Hi, how can I help you?",ctaText:"Ask for information",footerText:"Generated by AI. Please verify important information.",placeholder:"Write a message...",placeholderDisabled:"Demo mode - Input disabled",sendButton:"Send",resetTitle:"Reset Chat",closeTitle:"Close Chat",poweredBy:"Powered by",demoSuffix:"(Demo)"},status:{thinking:"Thinking...",searching:"🔍 Searching...",reconnecting:"Reconnecting...",error:"A communication error occurred.",connectionError:"A connection error occurred.",reconnectFailed:"Could not re-establish connection. Please reload the page to try again.",configErrorApi:"Configuration Error: Missing API URL.",sendError:"An error occurred while sending the message.",humanAgentJoined:"An agent has joined the chat.",humanAgentLeft:"The human agent has left the conversation.",assistantBack:"The assistant is back online."},product:{buyButton:"Buy"},demo:{initialMessage:"Hi, how can I help you?",userMessage:"I'm looking for comfortable running shoes.",botReply:"Certainly! We have several options. Here is a very popular model known for its comfort and support. You can see more details here:",ctaText:"See Shoe XYZ"}},ds={widget:{title:"Assistant Commercial IA",initialMessage:"Bonjour, comment puis-je vous aider ?",ctaText:"Demander des informations",footerText:"Généré par IA. Veuillez vérifier les informations importantes.",placeholder:"Écrivez un message...",placeholderDisabled:"Mode démo - Saisie désactivée",sendButton:"Envoyer",resetTitle:"Réinitialiser le chat",closeTitle:"Fermer le chat",poweredBy:"Poweredy by",demoSuffix:"(Démo)"},status:{thinking:"Réflexion...",searching:"🔍 Recherche...",reconnecting:"Reconnexion...",error:"Une erreur de communication est survenue.",connectionError:"Une erreur de connexion est survenue.",reconnectFailed:"Impossible de rétablir la connexion. Veuillez recharger la page pour réessayer.",configErrorApi:"Erreur de configuration : URL de l'API manquante.",sendError:"Une erreur est survenue lors de l'envoi du message.",humanAgentJoined:"Un agent a rejoint le chat.",humanAgentLeft:"L'agent a quitté le chat.",assistantBack:"L'assistant est de retour en ligne."},product:{buyButton:"Acheter"},demo:{initialMessage:"Bonjour, comment puis-je vous aider ?",userMessage:"Je cherche des chaussures de course confortables.",botReply:"Certainement ! Nous avons plusieurs options. Voici un modèle très populaire connu pour son confort et son soutien. Vous pouvez voir plus de détails ici :",ctaText:"Voir Chaussure XYZ"}},gs={widget:{title:"KI-Verkaufsassistent",initialMessage:"Hallo, wie kann ich Ihnen helfen?",ctaText:"Informationen anfordern",footerText:"Generiert von KI. Bitte überprüfen Sie wichtige Informationen.",placeholder:"Schreiben Sie eine Nachricht...",placeholderDisabled:"Demo-Modus - Eingabe deaktiviert",sendButton:"Senden",resetTitle:"Chat zurücksetzen",closeTitle:"Chat schließen",poweredBy:"Poweredy by",demoSuffix:"(Demo)"},status:{thinking:"Denken...",searching:"🔍 Suche...",reconnecting:"Wiederverbinden...",error:"Ein Kommunikationsfehler ist aufgetreten.",connectionError:"Ein Verbindungsfehler ist aufgetreten.",reconnectFailed:"Die Verbindung konnte nicht wiederhergestellt werden. Bitte laden Sie die Seite neu, um es erneut zu versuchen.",configErrorApi:"Konfigurationsfehler: Fehlende API-URL.",sendError:"Beim Senden der Nachricht ist ein Fehler aufgetreten.",humanAgentJoined:"Ein Agent ist dem Chat beigetreten.",humanAgentLeft:"Der Agent hat den Chat verlassen.",assistantBack:"Der Assistent ist wieder online."},product:{buyButton:"Kaufen"},demo:{initialMessage:"Hallo, wie kann ich Ihnen helfen?",userMessage:"Ich suche bequeme Laufschuhe.",botReply:"Natürlich! Wir haben mehrere Optionen. Hier ist ein sehr beliebtes Modell, das für seinen Komfort und seine Unterstützung bekannt ist. Weitere Details finden Sie hier:",ctaText:"Schuh XYZ ansehen"}},fs={widget:{title:"Asistente de Ventas AI",initialMessage:"Hola, ¿en qué puedo ayudarte?",ctaText:"Pide información",footerText:"Generado por AI. Por favor, verifica la información importante.",placeholder:"Escribe un mensaje...",placeholderDisabled:"Modo demo - Entrada deshabilitada",sendButton:"Enviar",resetTitle:"Reiniciar Chat",closeTitle:"Cerrar Chat",poweredBy:"Poweredy by",demoSuffix:"(Demo)"},status:{thinking:"Pensando...",searching:"🔍 Buscando...",reconnecting:"Reconectando...",error:"Ocurrió un error de comunicación.",connectionError:"Ocurrió un error de conexión.",reconnectFailed:"No se pudo restablecer la conexión. Por favor, recarga la página para intentarlo de nuevo.",configErrorApi:"Error de Configuración: Falta la URL de la API.",sendError:"Ocurrió un error al enviar el mensaje.",humanAgentJoined:"Un agente se ha unido al chat.",humanAgentLeft:"El agente ha abandonado el chat.",assistantBack:"El asistente está de nuevo en línea."},product:{buyButton:"Comprar"},demo:{initialMessage:"Hola, ¿en qué puedo ayudarte?",userMessage:"Estoy buscando zapatillas cómodas para correr.",botReply:"¡Claro! Tenemos varias opciones. Aquí hay un modelo muy popular conocido por su comodidad y soporte. Puedes ver más detalles aquí:",ctaText:"Ver Zapato XYZ"}},ms={widget:{title:"Assistente Vendite AI",initialMessage:"Ciao, come posso aiutarti?",ctaText:"Chiedi informazioni",footerText:"Generato da AI. Verifica le informazioni importanti.",placeholder:"Scrivi un messaggio...",placeholderDisabled:"Modalità demo - Input disabilitato",sendButton:"Invia",resetTitle:"Reimposta Chat",closeTitle:"Chiudi Chat",poweredBy:"Poweredy by",demoSuffix:"(Demo)"},status:{thinking:"Sto pensando...",searching:"🔍 Cerco...",reconnecting:"Riconnessione in corso...",error:"Si è verificato un errore di comunicazione.",connectionError:"Si è verificato un errore di connessione.",reconnectFailed:"Impossibile ristabilire la connessione. Ricarica la pagina per riprovare.",configErrorApi:"Errore di configurazione: URL API mancante.",sendError:"Si è verificato un errore durante l'invio del messaggio.",humanAgentJoined:"Un agente si è unito alla conversazione.",humanAgentLeft:"L'agente ha lasciato la conversazione.",assistantBack:"L'assistente AI è di nuovo online."},product:{buyButton:"Acquista"},demo:{initialMessage:"Ciao, come posso aiutarti?",userMessage:"Sto cercando scarpe da corsa comode.",botReply:"Certamente! Abbiamo diverse opzioni. Ecco un modello molto popolare noto per il suo comfort e supporto. Puoi vedere più dettagli qui:",ctaText:"Vedi Scarpe XYZ"}};const bs=["en","fr","de","es","it"];_n("en",(()=>Promise.resolve(ps))),_n("fr",(()=>Promise.resolve(ds))),_n("de",(()=>Promise.resolve(gs))),_n("es",(()=>Promise.resolve(fs))),_n("it",(()=>Promise.resolve(ms)));const ys=function(e){const t=e,{formats:n}=t,s=((e,t)=>{var n={};for(var s in e)Bn.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&En)for(var s of En(e))t.indexOf(s)<0&&An.call(e,s)&&(n[s]=e[s]);return n})(t,["formats"]);let r=e.fallbackLocale;if(e.initialLocale)try{un.resolveLocale(e.initialLocale)&&(r=e.initialLocale)}catch(t){console.warn(`[svelte-i18n] The initial locale "${e.initialLocale}" is not a valid locale.`)}return s.warnOnMissingMessages&&(delete s.warnOnMissingMessages,null==s.handleMissingMessage?s.handleMissingMessage=In:console.warn('[svelte-i18n] The "warnOnMissingMessages" option is deprecated. Please use the "handleMissingMessage" option instead.')),Object.assign(Cn,s,{initialLocale:r}),n&&("number"in n&&Object.assign(Cn.formats.number,n.number),"date"in n&&Object.assign(Cn.formats.date,n.date),"time"in n&&Object.assign(Cn.formats.time,n.time)),qn.set(r)}({fallbackLocale:"en",initialLocale:function(){const e="undefined"==typeof window?null:window.navigator.language||window.navigator.languages[0];if(e){const t=e.split("-")[0].toLowerCase();if(bs.includes(t))return t}if(navigator.languages)for(const e of navigator.languages){const t=e.split("-")[0].toLowerCase();if(bs.includes(t))return t}return"en"}()});function vs(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");let xs={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function ws(e){xs=e}const $s=/[&<>"']/,ks=new RegExp($s.source,"g"),Ts=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,_s=new RegExp(Ts.source,"g"),Es={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bs=e=>Es[e];function As(e,t){if(t){if($s.test(e))return e.replace(ks,Bs)}else if(Ts.test(e))return e.replace(_s,Bs);return e}const Is=/(^|[^\[])\^/g;function Cs(e,t){let n="string"==typeof e?e:e.source;t=t||"";const s={replace:(e,t)=>{let r="string"==typeof t?t:t.source;return r=r.replace(Is,"$1"),n=n.replace(e,r),s},getRegex:()=>new RegExp(n,t)};return s}function Ms(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const Ss={exec:()=>null};function Os(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let s=!1,r=t;for(;--r>=0&&"\\"===n[r];)s=!s;return s?"|":" |"})).split(/ \|/);let s=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(/\\\|/g,"|");return n}function Hs(e,t,n){const s=e.length;if(0===s)return"";let r=0;for(;r<s;){const o=e.charAt(s-r-1);if(o!==t||n){if(o===t||!n)break;r++}else r++}return e.slice(0,s-r)}function Rs(e,t,n,s){const r=t.href,o=t.title?As(t.title):null,i=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){s.state.inLink=!0;const e={type:"link",raw:n,href:r,title:o,text:i,tokens:s.inlineTokens(i)};return s.state.inLink=!1,e}return{type:"image",raw:n,href:r,title:o,text:As(i)}}class Ls{options;rules;lexer;constructor(e){this.options=e||xs}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Hs(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const s=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=s.length?e.slice(s.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=Hs(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Hs(t[0],"\n")}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=Hs(t[0],"\n").split("\n"),n="",s="";const r=[];for(;e.length>0;){let t=!1;const o=[];let i;for(i=0;i<e.length;i++)if(/^ {0,3}>/.test(e[i]))o.push(e[i]),t=!0;else{if(t)break;o.push(e[i])}e=e.slice(i);const a=o.join("\n"),l=a.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");n=n?`${n}\n${a}`:a,s=s?`${s}\n${l}`:l;const c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,r,!0),this.lexer.state.top=c,0===e.length)break;const h=r[r.length-1];if("code"===h?.type)break;if("blockquote"===h?.type){const t=h,o=t.raw+"\n"+e.join("\n"),i=this.blockquote(o);r[r.length-1]=i,n=n.substring(0,n.length-t.raw.length)+i.raw,s=s.substring(0,s.length-t.text.length)+i.text;break}if("list"!==h?.type);else{const t=h,o=t.raw+"\n"+e.join("\n"),i=this.list(o);r[r.length-1]=i,n=n.substring(0,n.length-h.raw.length)+i.raw,s=s.substring(0,s.length-t.raw.length)+i.raw,e=o.substring(r[r.length-1].raw.length).split("\n")}}return{type:"blockquote",raw:n,tokens:r,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,r={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const o=new RegExp(`^( {0,3}${n})((?:[\t ][^\\n]*)?(?:\\n|$))`);let i=!1;for(;e;){let n=!1,s="",a="";if(!(t=o.exec(e)))break;if(this.rules.block.hr.test(e))break;s=t[0],e=e.substring(s.length);let l=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],h=!l.trim(),u=0;if(this.options.pedantic?(u=2,a=l.trimStart()):h?u=t[1].length+1:(u=t[2].search(/[^ ]/),u=u>4?1:u,a=l.slice(u),u+=t[1].length),h&&/^[ \t]*$/.test(c)&&(s+=c+"\n",e=e.substring(c.length+1),n=!0),!n){const t=new RegExp(`^ {0,${Math.min(3,u-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,u-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),r=new RegExp(`^ {0,${Math.min(3,u-1)}}(?:\`\`\`|~~~)`),o=new RegExp(`^ {0,${Math.min(3,u-1)}}#`),i=new RegExp(`^ {0,${Math.min(3,u-1)}}<[a-z].*>`,"i");for(;e;){const p=e.split("\n",1)[0];let d;if(c=p,this.options.pedantic?(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "),d=c):d=c.replace(/\t/g,"    "),r.test(c))break;if(o.test(c))break;if(i.test(c))break;if(t.test(c))break;if(n.test(c))break;if(d.search(/[^ ]/)>=u||!c.trim())a+="\n"+d.slice(u);else{if(h)break;if(l.replace(/\t/g,"    ").search(/[^ ]/)>=4)break;if(r.test(l))break;if(o.test(l))break;if(n.test(l))break;a+="\n"+c}h||c.trim()||(h=!0),s+=p+"\n",e=e.substring(p.length+1),l=d.slice(u)}}r.loose||(i?r.loose=!0:/\n[ \t]*\n[ \t]*$/.test(s)&&(i=!0));let p,d=null;this.options.gfm&&(d=/^\[[ xX]\] /.exec(a),d&&(p="[ ] "!==d[0],a=a.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:s,task:!!d,checked:p,loose:!1,text:a,tokens:[]}),r.raw+=s}r.items[r.items.length-1].raw=r.items[r.items.length-1].raw.trimEnd(),r.items[r.items.length-1].text=r.items[r.items.length-1].text.trimEnd(),r.raw=r.raw.trimEnd();for(let e=0;e<r.items.length;e++)if(this.lexer.state.top=!1,r.items[e].tokens=this.lexer.blockTokens(r.items[e].text,[]),!r.loose){const t=r.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));r.loose=n}if(r.loose)for(let e=0;e<r.items.length;e++)r.items[e].loose=!0;return r}}html(e){const t=this.rules.block.html.exec(e);if(t){return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!/[:|]/.test(t[2]))return;const n=Os(t[1]),s=t[2].replace(/^\||\| *$/g,"").split("|"),r=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const e of s)/^ *-+: *$/.test(e)?o.align.push("right"):/^ *:-+: *$/.test(e)?o.align.push("center"):/^ *:-+ *$/.test(e)?o.align.push("left"):o.align.push(null);for(let e=0;e<n.length;e++)o.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:o.align[e]});for(const e of r)o.rows.push(Os(e,o.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:o.align[t]}))));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:As(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=Hs(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let s=0;s<e.length;s++)if("\\"===e[s])s++;else if(e[s]===t[0])n++;else if(e[s]===t[1]&&(n--,n<0))return s;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],s="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],s=e[3])}else s=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),Rs(t,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:s?s.replace(this.rules.inline.anyPunctuation,"$1"):s},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const e=t[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!e){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return Rs(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s)return;if(s[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(s[1]||s[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const n=[...s[0]].length-1;let r,o,i=n,a=0;const l="*"===s[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(s=l.exec(t));){if(r=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!r)continue;if(o=[...r].length,s[3]||s[4]){i+=o;continue}if((s[5]||s[6])&&n%3&&!((n+o)%3)){a+=o;continue}if(i-=o,i>0)continue;o=Math.min(o,o+i+a);const t=[...s[0]][0].length,l=e.slice(0,n+s.index+t+o);if(Math.min(n,o)%2){const e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}const c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),s=/^ /.test(e)&&/ $/.test(e);return n&&s&&(e=e.substring(1,e.length-1)),e=As(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=As(t[1]),n="mailto:"+e):(e=As(t[1]),n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if("@"===t[2])e=As(t[0]),n="mailto:"+e;else{let s;do{s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(s!==t[0]);e=As(t[0]),n="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:As(t[0]),{type:"text",raw:t[0],text:e}}}}const Ps=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ns=/(?:[*+-]|\d{1,9}[.)])/,Ds=Cs(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ns).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Us=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,zs=/(?!\s*\])(?:\\.|[^\[\]\\])+/,js=Cs(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",zs).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Fs=Cs(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ns).getRegex(),Gs="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",qs=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Vs=Cs("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",qs).replace("tag",Gs).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Xs=Cs(Us).replace("hr",Ps).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Gs).getRegex(),Qs={blockquote:Cs(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Xs).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:js,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Ps,html:Vs,lheading:Ds,list:Fs,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:Xs,table:Ss,text:/^[^\n]+/},Ks=Cs("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ps).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Gs).getRegex(),Zs={...Qs,table:Ks,paragraph:Cs(Us).replace("hr",Ps).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ks).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Gs).getRegex()},Ys={...Qs,html:Cs("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",qs).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ss,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Cs(Us).replace("hr",Ps).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Ds).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ws=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Js=/^( {2,}|\\)\n(?!\s*$)/,er="\\p{P}\\p{S}",tr=Cs(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,er).getRegex(),nr=Cs(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,er).getRegex(),sr=Cs("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,er).getRegex(),rr=Cs("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,er).getRegex(),or=Cs(/\\([punct])/,"gu").replace(/punct/g,er).getRegex(),ir=Cs(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ar=Cs(qs).replace("(?:--\x3e|$)","--\x3e").getRegex(),lr=Cs("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ar).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),cr=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,hr=Cs(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",cr).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ur=Cs(/^!?\[(label)\]\[(ref)\]/).replace("label",cr).replace("ref",zs).getRegex(),pr=Cs(/^!?\[(ref)\](?:\[\])?/).replace("ref",zs).getRegex(),dr={_backpedal:Ss,anyPunctuation:or,autolink:ir,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:Js,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Ss,emStrongLDelim:nr,emStrongRDelimAst:sr,emStrongRDelimUnd:rr,escape:Ws,link:hr,nolink:pr,punctuation:tr,reflink:ur,reflinkSearch:Cs("reflink|nolink(?!\\()","g").replace("reflink",ur).replace("nolink",pr).getRegex(),tag:lr,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Ss},gr={...dr,link:Cs(/^!?\[(label)\]\((.*?)\)/).replace("label",cr).getRegex(),reflink:Cs(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",cr).getRegex()},fr={...dr,escape:Cs(Ws).replace("])","~|])").getRegex(),url:Cs(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},mr={...fr,br:Cs(Js).replace("{2,}","*").getRegex(),text:Cs(fr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},br={normal:Qs,gfm:Zs,pedantic:Ys},yr={normal:dr,gfm:fr,breaks:mr,pedantic:gr};class vr{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||xs,this.options.tokenizer=this.options.tokenizer||new Ls,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:br.normal,inline:yr.normal};this.options.pedantic?(t.block=br.pedantic,t.inline=yr.pedantic):this.options.gfm&&(t.block=br.gfm,this.options.breaks?t.inline=yr.breaks:t.inline=yr.gfm),this.tokenizer.rules=t}static get rules(){return{block:br,inline:yr}}static lex(e,t){return new vr(t).lex(e)}static lexInline(e,t){return new vr(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){let s,r,o;for(this.options.pedantic&&(e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((n=>!!(s=n.call({lexer:this},e,t))&&(e=e.substring(s.raw.length),t.push(s),!0)))))if(s=this.tokenizer.space(e))e=e.substring(s.raw.length),1===s.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(s);else if(s=this.tokenizer.code(e))e=e.substring(s.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(s):(r.raw+="\n"+s.raw,r.text+="\n"+s.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(s=this.tokenizer.fences(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.heading(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.hr(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.blockquote(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.list(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.html(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.def(e))e=e.substring(s.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title}):(r.raw+="\n"+s.raw,r.text+="\n"+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(s=this.tokenizer.table(e))e=e.substring(s.raw.length),t.push(s);else if(s=this.tokenizer.lheading(e))e=e.substring(s.raw.length),t.push(s);else{if(o=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let s;this.options.extensions.startBlock.forEach((e=>{s=e.call({lexer:this},n),"number"==typeof s&&s>=0&&(t=Math.min(t,s))})),t<1/0&&t>=0&&(o=e.substring(0,t+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o)))r=t[t.length-1],n&&"paragraph"===r?.type?(r.raw+="\n"+s.raw,r.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s),n=o.length!==e.length,e=e.substring(s.raw.length);else if(s=this.tokenizer.text(e))e=e.substring(s.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+s.raw,r.text+="\n"+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,s,r,o,i,a,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(i||(a=""),i=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((s=>!!(n=s.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),s=t[t.length-1],s&&"text"===n.type&&"text"===s.type?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),s=t[t.length-1],s&&"text"===n.type&&"text"===s.type?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,a))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(r=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let s;this.options.extensions.startInline.forEach((e=>{s=e.call({lexer:this},n),"number"==typeof s&&s>=0&&(t=Math.min(t,s))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(r))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(a=n.raw.slice(-1)),i=!0,s=t[t.length-1],s&&"text"===s.type?(s.raw+=n.raw,s.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class xr{options;parser;constructor(e){this.options=e||xs}space(e){return""}code({text:e,lang:t,escaped:n}){const s=(t||"").match(/^\S*/)?.[0],r=e.replace(/\n$/,"")+"\n";return s?'<pre><code class="language-'+As(s)+'">'+(n?r:As(r,!0))+"</code></pre>\n":"<pre><code>"+(n?r:As(r,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){const t=e.ordered,n=e.start;let s="";for(let t=0;t<e.items.length;t++){const n=e.items[t];s+=this.listitem(n)}const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+s+"</"+r+">\n"}listitem(e){let t="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&"paragraph"===e.tokens[0].type?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=n+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" "}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",n="";for(let t=0;t<e.header.length;t++)n+=this.tablecell(e.header[t]);t+=this.tablerow({text:n});let s="";for(let t=0;t<e.rows.length;t++){const r=e.rows[t];n="";for(let e=0;e<r.length;e++)n+=this.tablecell(r[e]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+s+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const s=this.parser.parseInline(n),r=Ms(e);if(null===r)return s;let o='<a href="'+(e=r)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+s+"</a>",o}image({href:e,title:t,text:n}){const s=Ms(e);if(null===s)return n;let r=`<img src="${e=s}" alt="${n}"`;return t&&(r+=` title="${t}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class wr{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class $r{options;renderer;textRenderer;constructor(e){this.options=e||xs,this.options.renderer=this.options.renderer||new xr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new wr}static parse(e,t){return new $r(t).parse(e)}static parseInline(e,t){return new $r(t).parseInline(e)}parse(e,t=!0){let n="";for(let s=0;s<e.length;s++){const r=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const e=r,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}const o=r;switch(o.type){case"space":n+=this.renderer.space(o);continue;case"hr":n+=this.renderer.hr(o);continue;case"heading":n+=this.renderer.heading(o);continue;case"code":n+=this.renderer.code(o);continue;case"table":n+=this.renderer.table(o);continue;case"blockquote":n+=this.renderer.blockquote(o);continue;case"list":n+=this.renderer.list(o);continue;case"html":n+=this.renderer.html(o);continue;case"paragraph":n+=this.renderer.paragraph(o);continue;case"text":{let r=o,i=this.renderer.text(r);for(;s+1<e.length&&"text"===e[s+1].type;)r=e[++s],i+="\n"+this.renderer.text(r);n+=t?this.renderer.paragraph({type:"paragraph",raw:i,text:i,tokens:[{type:"text",raw:i,text:i}]}):i;continue}default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let s=0;s<e.length;s++){const r=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const e=this.options.extensions.renderers[r.type].call({parser:this},r);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=e||"";continue}}const o=r;switch(o.type){case"escape":case"text":n+=t.text(o);break;case"html":n+=t.html(o);break;case"link":n+=t.link(o);break;case"image":n+=t.image(o);break;case"strong":n+=t.strong(o);break;case"em":n+=t.em(o);break;case"codespan":n+=t.codespan(o);break;case"br":n+=t.br(o);break;case"del":n+=t.del(o);break;default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}}class kr{options;block;constructor(e){this.options=e||xs}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?vr.lex:vr.lexInline}provideParser(){return this.block?$r.parse:$r.parseInline}}const Tr=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=$r;Renderer=xr;TextRenderer=wr;Lexer=vr;Tokenizer=Ls;Hooks=kr;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(const s of e)switch(n=n.concat(t.call(this,s)),s.type){case"table":{const e=s;for(const s of e.header)n=n.concat(this.walkTokens(s.tokens,t));for(const s of e.rows)for(const e of s)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=s;n=n.concat(this.walkTokens(e.items,t));break}default:{const e=s;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((s=>{const r=e[s].flat(1/0);n=n.concat(this.walkTokens(r,t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let s=e.renderer.apply(this,t);return!1===s&&(s=n.apply(this,t)),s}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){const t=this.defaults.renderer||new xr(this.defaults);for(const n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const s=n,r=e.renderer[s],o=t[s];t[s]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=o.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new Ls(this.defaults);for(const n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const s=n,r=e.tokenizer[s],o=t[s];t[s]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=o.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new kr;for(const n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;const s=n,r=e.hooks[s],o=t[s];kr.passThroughHooks.has(n)?t[s]=e=>{if(this.defaults.async)return Promise.resolve(r.call(t,e)).then((e=>o.call(t,e)));const n=r.call(t,e);return o.call(t,n)}:t[s]=(...e)=>{let n=r.apply(t,e);return!1===n&&(n=o.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,s=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(s.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return vr.lex(e,t??this.defaults)}parser(e,t){return $r.parse(e,t??this.defaults)}parseMarkdown(e){return(t,n)=>{const s={...n},r={...this.defaults,...s},o=this.onError(!!r.silent,!!r.async);if(!0===this.defaults.async&&!1===s.async)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==t)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));r.hooks&&(r.hooks.options=r,r.hooks.block=e);const i=r.hooks?r.hooks.provideLexer():e?vr.lex:vr.lexInline,a=r.hooks?r.hooks.provideParser():e?$r.parse:$r.parseInline;if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(t):t).then((e=>i(e,r))).then((e=>r.hooks?r.hooks.processAllTokens(e):e)).then((e=>r.walkTokens?Promise.all(this.walkTokens(e,r.walkTokens)).then((()=>e)):e)).then((e=>a(e,r))).then((e=>r.hooks?r.hooks.postprocess(e):e)).catch(o);try{r.hooks&&(t=r.hooks.preprocess(t));let e=i(t,r);r.hooks&&(e=r.hooks.processAllTokens(e)),r.walkTokens&&this.walkTokens(e,r.walkTokens);let n=a(e,r);return r.hooks&&(n=r.hooks.postprocess(n)),n}catch(e){return o(e)}}}onError(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+As(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}};function _r(e,t){return Tr.parse(e,t)}_r.options=_r.setOptions=function(e){return Tr.setOptions(e),_r.defaults=Tr.defaults,ws(_r.defaults),_r},_r.getDefaults=vs,_r.defaults=xs,_r.use=function(...e){return Tr.use(...e),_r.defaults=Tr.defaults,ws(_r.defaults),_r},_r.walkTokens=function(e,t){return Tr.walkTokens(e,t)},_r.parseInline=Tr.parseInline,_r.Parser=$r,_r.parser=$r.parse,_r.Renderer=xr,_r.TextRenderer=wr,_r.Lexer=vr,_r.lexer=vr.lex,_r.Tokenizer=Ls,_r.Hooks=kr,_r.parse=_r,_r.options,_r.setOptions,_r.use,_r.walkTokens,_r.parseInline,$r.parse,vr.lex;const Er=Object.create(null);Er.open="0",Er.close="1",Er.ping="2",Er.pong="3",Er.message="4",Er.upgrade="5",Er.noop="6";const Br=Object.create(null);Object.keys(Er).forEach((e=>{Br[Er[e]]=e}));const Ar={type:"error",data:"parser error"},Ir="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Cr="function"==typeof ArrayBuffer,Mr=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Sr=({type:e,data:t},n,s)=>Ir&&t instanceof Blob?n?s(t):Or(t,s):Cr&&(t instanceof ArrayBuffer||Mr(t))?n?s(t):Or(new Blob([t]),s):s(Er[e]+(t||"")),Or=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Hr(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Rr;const Lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pr="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<64;e++)Pr[Lr.charCodeAt(e)]=e;const Nr="function"==typeof ArrayBuffer,Dr=(e,t)=>{if("string"!=typeof e)return{type:"message",data:zr(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Ur(e.substring(1),t)};return Br[n]?e.length>1?{type:Br[n],data:e.substring(1)}:{type:Br[n]}:Ar},Ur=(e,t)=>{if(Nr){const n=(e=>{let t,n,s,r,o,i=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const c=new ArrayBuffer(i),h=new Uint8Array(c);for(t=0;t<a;t+=4)n=Pr[e.charCodeAt(t)],s=Pr[e.charCodeAt(t+1)],r=Pr[e.charCodeAt(t+2)],o=Pr[e.charCodeAt(t+3)],h[l++]=n<<2|s>>4,h[l++]=(15&s)<<4|r>>2,h[l++]=(3&r)<<6|63&o;return c})(e);return zr(n,t)}return{base64:!0,data:e}},zr=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,jr=String.fromCharCode(30);function Fr(){return new TransformStream({transform(e,t){!function(e,t){Ir&&e.data instanceof Blob?e.data.arrayBuffer().then(Hr).then(t):Cr&&(e.data instanceof ArrayBuffer||Mr(e.data))?t(Hr(e.data)):Sr(e,!1,(e=>{Rr||(Rr=new TextEncoder),t(Rr.encode(e))}))}(e,(n=>{const s=n.length;let r;if(s<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,s);else if(s<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,s)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(s))}e.data&&"string"!=typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)}))}})}let Gr;function qr(e){return e.reduce(((e,t)=>e+t.length),0)}function Vr(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let r=0;r<t;r++)n[r]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function Xr(e){if(e)return function(e){for(var t in Xr.prototype)e[t]=Xr.prototype[t];return e}(e)}Xr.prototype.on=Xr.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Xr.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Xr.prototype.off=Xr.prototype.removeListener=Xr.prototype.removeAllListeners=Xr.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,s=this._callbacks["$"+e];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<s.length;r++)if((n=s[r])===t||n.fn===t){s.splice(r,1);break}return 0===s.length&&delete this._callbacks["$"+e],this},Xr.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){s=0;for(var r=(n=n.slice(0)).length;s<r;++s)n[s].apply(this,t)}return this},Xr.prototype.emitReserved=Xr.prototype.emit,Xr.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Xr.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Qr="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Kr="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Zr(e,...t){return t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const Yr=Kr.setTimeout,Wr=Kr.clearTimeout;function Jr(e,t){t.useNativeTimers?(e.setTimeoutFn=Yr.bind(Kr),e.clearTimeoutFn=Wr.bind(Kr)):(e.setTimeoutFn=Kr.setTimeout.bind(Kr),e.clearTimeoutFn=Kr.clearTimeout.bind(Kr))}function eo(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class to extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class no extends Xr{constructor(e){super(),this.writable=!1,Jr(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new to(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Dr(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class so extends no{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(jr),s=[];for(let e=0;e<n.length;e++){const r=Dr(n[e],t);if(s.push(r),"error"===r.type)break}return s})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,s=new Array(n);let r=0;e.forEach(((e,o)=>{Sr(e,!1,(e=>{s[o]=e,++r===n&&t(s.join(jr))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=eo()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let ro=!1;try{ro="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const oo=ro;function io(){}class ao extends so{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class lo extends Xr{constructor(e,t,n){super(),this.createRequest=e,Jr(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=Zr(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(e){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"==typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(e){return void this.setTimeoutFn((()=>{this._onError(e)}),0)}"undefined"!=typeof document&&(this._index=lo.requestsCount++,lo.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=io,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete lo.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(lo.requestsCount=0,lo.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",co);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Kr?"pagehide":"unload",co,!1)}function co(){for(let e in lo.requests)lo.requests.hasOwnProperty(e)&&lo.requests[e].abort()}const ho=function(){const e=uo({xdomain:!1});return e&&null!==e.responseType}();function uo(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||oo))return new XMLHttpRequest}catch(e){}if(!t)try{return new(Kr[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}const po="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class go extends no{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=po?{}:Zr(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;Sr(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(e){}s&&Qr((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=eo()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const fo=Kr.WebSocket||Kr.MozWebSocket;const mo={websocket:class extends go{createSocket(e,t,n){return po?new fo(e,t,n):t?new fo(e,t):new fo(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends no{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){Gr||(Gr=new TextDecoder);const n=[];let s=0,r=-1,o=!1;return new TransformStream({transform(i,a){for(n.push(i);;){if(0===s){if(qr(n)<1)break;const e=Vr(n,1);o=!(128&~e[0]),r=127&e[0],s=r<126?3:126===r?1:2}else if(1===s){if(qr(n)<2)break;const e=Vr(n,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),s=3}else if(2===s){if(qr(n)<8)break;const e=Vr(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),o=t.getUint32(0);if(o>Math.pow(2,21)-1){a.enqueue(Ar);break}r=o*Math.pow(2,32)+t.getUint32(4),s=3}else{if(qr(n)<r)break;const e=Vr(n,r);a.enqueue(Dr(o?e:Gr.decode(e),t)),s=0}if(0===r||r>e){a.enqueue(Ar);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),s=Fr();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const r=()=>{n.read().then((({done:e,value:t})=>{e||(this.onPacket(t),r())})).catch((e=>{}))};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;this._writer.write(n).then((()=>{s&&Qr((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends ao{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=ho&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new lo(uo,this.uri(),e)}}},bo=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,yo=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function vo(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");-1!=n&&-1!=s&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let r=bo.exec(e||""),o={},i=14;for(;i--;)o[yo[i]]=r[i]||"";return-1!=n&&-1!=s&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||s.splice(0,1);"/"==t.slice(-1)&&s.splice(s.length-1,1);return s}(0,o.path),o.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,s){t&&(n[t]=s)})),n}(0,o.query),o}const xo="function"==typeof addEventListener&&"function"==typeof removeEventListener,wo=[];xo&&addEventListener("offline",(()=>{wo.forEach((e=>e()))}),!1);class $o extends Xr{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const n=vo(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=vo(t.host).host);Jr(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let e=0,s=n.length;e<s;e++){let s=n[e].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}(this.opts.query)),xo&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},wo.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&$o.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",$o.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(e+="string"==typeof(t=s)?function(e){let t=0,n=0;for(let s=0,r=e.length;s<r;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Qr((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,s){if("function"==typeof t&&(s=t,t=void 0),"function"==typeof n&&(s=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if($o.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),xo&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=wo.indexOf(this._offlineEventListener);-1!==e&&wo.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}$o.protocol=4;class ko extends $o{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;$o.priorWebsocketSuccess=!1;const s=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;$o.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function r(){n||(n=!0,c(),t.close(),t=null)}const o=e=>{const n=new Error("probe error: "+e);n.transport=t.name,r(),this.emitReserved("upgradeError",n)};function i(){o("transport closed")}function a(){o("socket closed")}function l(e){t&&e.name!==t.name&&r()}const c=()=>{t.removeListener("open",s),t.removeListener("error",o),t.removeListener("close",i),this.off("close",a),this.off("upgrading",l)};t.once("open",s),t.once("error",o),t.once("close",i),this.once("close",a),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let To=class extends ko{constructor(e,t={}){const n="object"==typeof e?e:t;(!n.transports||n.transports&&"string"==typeof n.transports[0])&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map((e=>mo[e])).filter((e=>!!e))),super(e,n)}};const _o="function"==typeof ArrayBuffer,Eo=Object.prototype.toString,Bo="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Eo.call(Blob),Ao="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Eo.call(File);function Io(e){return _o&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Bo&&e instanceof Blob||Ao&&e instanceof File}function Co(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Co(e[t]))return!0;return!1}if(Io(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Co(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&Co(e[t]))return!0;return!1}function Mo(e){const t=[],n=e.data,s=e;return s.data=So(n,t),s.attachments=t.length,{packet:s,buffers:t}}function So(e,t){if(!e)return e;if(Io(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=So(e[s],t);return n}if("object"==typeof e&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=So(e[s],t));return n}return e}function Oo(e,t){return e.data=Ho(e.data,t),delete e.attachments,e}function Ho(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Ho(e[n],t);else if("object"==typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Ho(e[n],t));return e}const Ro=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var Lo;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Lo||(Lo={}));function Po(e){return"[object Object]"===Object.prototype.toString.call(e)}class No extends Xr{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Lo.BINARY_EVENT;n||t.type===Lo.BINARY_ACK?(t.type=n?Lo.EVENT:Lo.ACK,this.reconstructor=new Do(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Io(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Lo[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Lo.BINARY_EVENT||n.type===Lo.BINARY_ACK){const s=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(s,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const s=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(s,t)}else n.nsp="/";const s=e.charAt(t+1);if(""!==s&&Number(s)==s){const s=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){const s=this.tryParse(e.substr(t));if(!No.isPayloadValid(n.type,s))throw new Error("invalid payload");n.data=s}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case Lo.CONNECT:return Po(t);case Lo.DISCONNECT:return void 0===t;case Lo.CONNECT_ERROR:return"string"==typeof t||Po(t);case Lo.EVENT:case Lo.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Ro.indexOf(t[0]));case Lo.ACK:case Lo.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Do{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Oo(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var Uo=Object.freeze({__proto__:null,Decoder:No,Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==Lo.EVENT&&e.type!==Lo.ACK||!Co(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Lo.EVENT?Lo.BINARY_EVENT:Lo.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Lo.BINARY_EVENT&&e.type!==Lo.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Mo(e),n=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(n),s}},get PacketType(){return Lo},protocol:5});function zo(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const jo=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Fo extends Xr{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[zo(e,"open",this.onopen.bind(this)),zo(e,"packet",this.onpacket.bind(this)),zo(e,"error",this.onerror.bind(this)),zo(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,s,r;if(jo.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:Lo.EVENT,data:t,options:{}};if(o.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),o.id=e}const i=null===(s=null===(n=this.io.engine)||void 0===n?void 0:n.transport)||void 0===s?void 0:s.writable,a=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!i||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var n;const s=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===s)return void(this.acks[e]=t);const r=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),s),o=(...e)=>{this.io.clearTimeoutFn(r),t.apply(this,e)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise(((n,s)=>{const r=(e,t)=>e?s(e):n(t);r.withError=!0,t.push(r),this.emit(e,...t)}))}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(((e,...s)=>{if(n!==this._queue[0])return;return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...s)),n.pending=!1,this._drainQueue()})),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Lo.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Lo.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Lo.EVENT:case Lo.BINARY_EVENT:this.onevent(e);break;case Lo.ACK:case Lo.BINARY_ACK:this.onack(e);break;case Lo.DISCONNECT:this.ondisconnect();break;case Lo.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...s){n||(n=!0,t.packet({type:Lo.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Lo.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Go(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Go.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},Go.prototype.reset=function(){this.attempts=0},Go.prototype.setMin=function(e){this.ms=e},Go.prototype.setMax=function(e){this.max=e},Go.prototype.setJitter=function(e){this.jitter=e};class qo extends Xr{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,Jr(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Go({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||Uo;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new To(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=zo(t,"open",(function(){n.onopen(),e&&e()})),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=zo(t,"error",r);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{s(),r(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(zo(e,"ping",this.onping.bind(this)),zo(e,"data",this.ondata.bind(this)),zo(e,"error",this.onerror.bind(this)),zo(e,"close",this.onclose.bind(this)),zo(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){Qr((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Fo(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t){if(this.nsps[e].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Vo={};function Xo(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let s=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),s=vo(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+t,s.href=s.protocol+"://"+r+(n&&n.port===s.port?"":":"+s.port),s}(e,(t=t||{}).path||"/socket.io"),s=n.source,r=n.id,o=n.path,i=Vo[r]&&o in Vo[r].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||i?a=new qo(s,t):(Vo[r]||(Vo[r]=new qo(s,t)),a=Vo[r]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}function Qo(e,t,n,s,r=!0){if(!r||!e||e.startsWith("#"))return e;try{const r=new URL(e,window.location.origin);return r.searchParams.set("utm_source",t),r.searchParams.set("utm_medium",n),r.searchParams.set("utm_campaign",s),r.toString()}catch(t){return console.warn("Could not add UTM params to invalid URL:",e,t),e}}function Ko(e,{delay:n=0,duration:s=400,easing:r=t}={}){const o=+getComputedStyle(e).opacity;return{delay:n,duration:s,easing:r,css:e=>"opacity: "+e*o}}function Zo(e){b(e,"svelte-1oar0lg",".button-wrapper.svelte-1oar0lg.svelte-1oar0lg{position:relative}.button-overlay.svelte-1oar0lg.svelte-1oar0lg{position:absolute;background-color:var(--messages-bg);color:var(--primary-text-color);padding:8px 12px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.15);width:max-content;max-width:220px;font-size:14px;line-height:1.4;z-index:1;bottom:50%;transform:translateY(50%)}.button-overlay-tail.svelte-1oar0lg.svelte-1oar0lg{position:absolute;width:0;height:0;border-style:solid;top:50%;transform:translateY(-50%)}.bottom-right .button-overlay.svelte-1oar0lg.svelte-1oar0lg,.top-right .button-overlay.svelte-1oar0lg.svelte-1oar0lg{right:calc(100% + 15px)}.bottom-right .button-overlay-tail.svelte-1oar0lg.svelte-1oar0lg,.top-right .button-overlay-tail.svelte-1oar0lg.svelte-1oar0lg{left:100%;border-width:8px 0 8px 8px;border-color:transparent transparent transparent var(--messages-bg)}.bottom-left .button-overlay.svelte-1oar0lg.svelte-1oar0lg,.top-left .button-overlay.svelte-1oar0lg.svelte-1oar0lg{left:calc(100% + 15px)}.bottom-left .button-overlay-tail.svelte-1oar0lg.svelte-1oar0lg,.top-left .button-overlay-tail.svelte-1oar0lg.svelte-1oar0lg{right:100%;border-width:8px 8px 8px 0;border-color:transparent var(--messages-bg) transparent transparent}#chat-button.svelte-1oar0lg.svelte-1oar0lg{background-color:var(--chat-btn-bg) !important;color:var(--chat-btn-text) !important;border:none;border-radius:50%;width:60px !important;height:60px !important;cursor:pointer;font-size:24px;display:flex;align-items:center;justify-content:center;overflow:hidden}#chat-button.svelte-1oar0lg img.svelte-1oar0lg{max-width:100%;max-height:100%;object-fit:cover}.custom-chat-button-wrapper.svelte-1oar0lg.svelte-1oar0lg{background:none;border:none;padding:0;cursor:pointer;display:inline-block;line-height:0}.custom-chat-button-image.svelte-1oar0lg.svelte-1oar0lg{width:60px;height:60px;display:block;object-fit:cover;border-radius:0}")}function Yo(e){let t,n,s,r,o,i;return{c(){t=k("div"),n=_(e[4]),s=E(),r=k("div"),I(r,"class","button-overlay-tail svelte-1oar0lg"),I(t,"class","button-overlay svelte-1oar0lg")},m(e,o){w(e,t,o),m(t,n),m(t,s),m(t,r),i=!0},p(e,t){(!i||16&t)&&C(n,e[4])},i(e){i||(e&&J((()=>{i&&(o||(o=de(t,Ko,{duration:300},!0)),o.run(1))})),i=!0)},o(e){e&&(o||(o=de(t,Ko,{duration:300},!1)),o.run(0)),i=!1},d(e){e&&$(t),e&&o&&o.end()}}}function Wo(e){let t,n,s,r;function o(e,t){return e[7]?ni:e[6]?ti:ei}let i=o(e),a=i(e);return{c(){t=k("button"),a.c(),I(t,"id","chat-button"),I(t,"aria-label",n=e[8]("widget.title")),I(t,"class","svelte-1oar0lg")},m(n,o){w(n,t,o),a.m(t,null),s||(r=A(t,"click",e[9]),s=!0)},p(e,s){i===(i=o(e))&&a?a.p(e,s):(a.d(1),a=i(e),a&&(a.c(),a.m(t,null))),256&s&&n!==(n=e[8]("widget.title"))&&I(t,"aria-label",n)},d(e){e&&$(t),a.d(),s=!1,r()}}}function Jo(e){let t,n,s,o,i,a;return{c(){t=k("button"),n=k("img"),l(n.src,s=e[3])||I(n,"src",s),I(n,"alt",""),I(n,"class","custom-chat-button-image svelte-1oar0lg"),I(t,"class","custom-chat-button-wrapper svelte-1oar0lg"),I(t,"aria-label",o=e[8]("widget.title")),I(t,"tabindex","0")},m(s,r){w(s,t,r),m(t,n),i||(a=[A(t,"click",e[9]),A(t,"keydown",e[11])],i=!0)},p(e,r){8&r&&!l(n.src,s=e[3])&&I(n,"src",s),256&r&&o!==(o=e[8]("widget.title"))&&I(t,"aria-label",o)},d(e){e&&$(t),i=!1,r(a)}}}function ei(e){let t,n;return{c(){t=new R(!1),n=B(),t.a=n},m(s,r){t.m(e[2],s,r),w(s,n,r)},p(e,n){4&n&&t.p(e[2])},d(e){e&&($(n),t.d())}}}function ti(e){let t,n;return{c(){t=new R(!1),n=B(),t.a=n},m(s,r){t.m(e[2],s,r),w(s,n,r)},p(e,n){4&n&&t.p(e[2])},d(e){e&&($(n),t.d())}}}function ni(e){let t,n;return{c(){t=k("img"),l(t.src,n=e[2])||I(t,"src",n),I(t,"alt",""),I(t,"class","svelte-1oar0lg")},m(e,n){w(e,t,n)},p(e,s){4&s&&!l(t.src,n=e[2])&&I(t,"src",n)},d(e){e&&$(t)}}}function si(e){let t,n,s=e[5]&&e[4]&&(!e[0]||e[1])&&Yo(e);function r(e,t){return e[3]?Jo:Wo}let o=r(e),i=o(e);return{c(){t=k("div"),s&&s.c(),n=E(),i.c(),I(t,"class","button-wrapper svelte-1oar0lg")},m(e,r){w(e,t,r),s&&s.m(t,null),m(t,n),i.m(t,null)},p(e,[a]){e[5]&&e[4]&&(!e[0]||e[1])?s?(s.p(e,a),51&a&&he(s,1)):(s=Yo(e),s.c(),he(s,1),s.m(t,n)):s&&(le(),ue(s,1,1,(()=>{s=null})),ce()),o===(o=r(e))&&i?i.p(e,a):(i.d(1),i=o(e),i&&(i.c(),i.m(t,null)))},i(e){he(s)},o(e){ue(s)},d(e){e&&$(t),s&&s.d(),i.d()}}}function ri(e,t,n){let s,r,o;h(e,us,(e=>n(8,o=e)));let i,{isChatVisible:a=!1}=t,{isDemo:l=!1}=t,{buttonIcon:c="💬"}=t,{buttonImageUrl:u=null}=t,{buttonOverlayText:p=null}=t,{buttonOverlayDelay:d=5e3}=t,g=!1;const f=G();function m(){g&&!l&&(n(5,g=!1),clearTimeout(i)),f("toggleChat")}F((()=>(!p||a&&!l||(n(5,g=!0),l||(i=setTimeout((()=>{n(5,g=!1)}),parseInt(d,10)||5e3))),()=>{clearTimeout(i)})));return e.$$set=e=>{"isChatVisible"in e&&n(0,a=e.isChatVisible),"isDemo"in e&&n(1,l=e.isDemo),"buttonIcon"in e&&n(2,c=e.buttonIcon),"buttonImageUrl"in e&&n(3,u=e.buttonImageUrl),"buttonOverlayText"in e&&n(4,p=e.buttonOverlayText),"buttonOverlayDelay"in e&&n(10,d=e.buttonOverlayDelay)},e.$$.update=()=>{4&e.$$.dirty&&n(7,s=null!=c.match(/\.(jpeg|jpg|gif|png)$/)),4&e.$$.dirty&&n(6,r=c.trim().startsWith("<svg"))},[a,l,c,u,p,g,r,s,o,m,d,e=>("Enter"===e.key||" "===e.key)&&m()]}Object.assign(Xo,{Manager:qo,Socket:Fo,io:Xo,connect:Xo});class oi extends _e{constructor(e){super(),we(this,e,ri,si,i,{isChatVisible:0,isDemo:1,buttonIcon:2,buttonImageUrl:3,buttonOverlayText:4,buttonOverlayDelay:10},Zo)}get isChatVisible(){return this.$$.ctx[0]}set isChatVisible(e){this.$$set({isChatVisible:e}),se()}get isDemo(){return this.$$.ctx[1]}set isDemo(e){this.$$set({isDemo:e}),se()}get buttonIcon(){return this.$$.ctx[2]}set buttonIcon(e){this.$$set({buttonIcon:e}),se()}get buttonImageUrl(){return this.$$.ctx[3]}set buttonImageUrl(e){this.$$set({buttonImageUrl:e}),se()}get buttonOverlayText(){return this.$$.ctx[4]}set buttonOverlayText(e){this.$$set({buttonOverlayText:e}),se()}get buttonOverlayDelay(){return this.$$.ctx[10]}set buttonOverlayDelay(e){this.$$set({buttonOverlayDelay:e}),se()}}function ii(e){b(e,"svelte-71a5ck","#chat-header.svelte-71a5ck{display:flex;justify-content:space-between;align-items:center;background-color:var(--header-bg);color:var(--header-text);padding:10px 10px 10px 14px;flex-shrink:0}.header-buttons.svelte-71a5ck{display:flex;gap:0px}#reset-chat.svelte-71a5ck,#close-chat.svelte-71a5ck{background:none;border:none;color:var(--header-text);font-size:20px;line-height:1;padding:10px;cursor:pointer;display:flex;align-items:center;justify-content:center;height:40px}")}function ai(e){let t,n,s,r,o,i,a;return{c(){t=k("button"),n=T("svg"),s=T("path"),I(s,"d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"),I(n,"xmlns","http://www.w3.org/2000/svg"),I(n,"viewBox","0 0 24 24"),I(n,"fill","currentColor"),I(n,"width","20"),I(n,"height","20"),I(t,"id","close-chat"),I(t,"title",r=e[3]("widget.closeTitle")),I(t,"aria-label",o=e[3]("widget.closeTitle")),I(t,"class","svelte-71a5ck")},m(r,o){w(r,t,o),m(t,n),m(n,s),i||(a=A(t,"click",e[5]),i=!0)},p(e,n){8&n&&r!==(r=e[3]("widget.closeTitle"))&&I(t,"title",r),8&n&&o!==(o=e[3]("widget.closeTitle"))&&I(t,"aria-label",o)},d(e){e&&$(t),i=!1,a()}}}function li(t){let n,s,r,o,i,a,l,c,h,u,p,d,g,f,b=t[1]?` ${t[3]("widget.demoSuffix")}`:"",y=t[2]&&ai(t);return{c(){n=k("div"),s=k("div"),r=_(t[0]),o=_(b),i=E(),a=k("div"),l=k("button"),c=T("svg"),h=T("path"),d=E(),y&&y.c(),I(h,"d","M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"),I(c,"xmlns","http://www.w3.org/2000/svg"),I(c,"viewBox","0 0 24 24"),I(c,"fill","currentColor"),I(c,"width","20"),I(c,"height","20"),I(l,"id","reset-chat"),I(l,"title",u=t[3]("widget.resetTitle")),I(l,"aria-label",p=t[3]("widget.resetTitle")),I(l,"class","svelte-71a5ck"),I(a,"class","header-buttons svelte-71a5ck"),I(n,"id","chat-header"),I(n,"class","svelte-71a5ck")},m(e,u){w(e,n,u),m(n,s),m(s,r),m(s,o),m(n,i),m(n,a),m(a,l),m(l,c),m(c,h),m(a,d),y&&y.m(a,null),g||(f=A(l,"click",t[4]),g=!0)},p(e,[t]){1&t&&C(r,e[0]),10&t&&b!==(b=e[1]?` ${e[3]("widget.demoSuffix")}`:"")&&C(o,b),8&t&&u!==(u=e[3]("widget.resetTitle"))&&I(l,"title",u),8&t&&p!==(p=e[3]("widget.resetTitle"))&&I(l,"aria-label",p),e[2]?y?y.p(e,t):(y=ai(e),y.c(),y.m(a,null)):y&&(y.d(1),y=null)},i:e,o:e,d(e){e&&$(n),y&&y.d(),g=!1,f()}}}function ci(e,t,n){let s;h(e,us,(e=>n(3,s=e)));let{displayTitle:r=""}=t,{isDemo:o=!1}=t,{closable:i=!0}=t;const a=G();return e.$$set=e=>{"displayTitle"in e&&n(0,r=e.displayTitle),"isDemo"in e&&n(1,o=e.isDemo),"closable"in e&&n(2,i=e.closable)},[r,o,i,s,function(){a("resetChat")},function(){a("toggleChat")}]}Te(oi,{isChatVisible:{type:"Boolean"},isDemo:{type:"Boolean"},buttonIcon:{},buttonImageUrl:{},buttonOverlayText:{},buttonOverlayDelay:{}},[],[],!0);class hi extends _e{constructor(e){super(),we(this,e,ci,li,i,{displayTitle:0,isDemo:1,closable:2},ii)}get displayTitle(){return this.$$.ctx[0]}set displayTitle(e){this.$$set({displayTitle:e}),se()}get isDemo(){return this.$$.ctx[1]}set isDemo(e){this.$$set({isDemo:e}),se()}get closable(){return this.$$.ctx[2]}set closable(e){this.$$set({closable:e}),se()}}function ui(e){b(e,"svelte-e27use",".cta-button.svelte-e27use{display:block;background-color:var(--cta-btn-bg);color:var(--cta-btn-text);padding:8px 12px;border-radius:20px;text-decoration:none;margin-top:10px;font-size:14px;text-align:center;width:100%;box-sizing:border-box;transition:background-color 0.3s, color 0.3s}.cta-button.svelte-e27use:hover{background-color:var(--cta-btn-hover-bg, var(--cta-hover-bg));color:var(--cta-btn-hover-text, var(--cta-hover-text))}")}function pi(t){let n,s,r,o;return{c(){n=k("a"),s=_(t[1]),I(n,"href",r=Qo(t[0],"chat","chatbot","chatbot",t[3])),I(n,"target",o=t[2]?"_blank":"_self"),I(n,"class","cta-button svelte-e27use")},m(e,t){w(e,n,t),m(n,s)},p(e,[t]){2&t&&C(s,e[1]),9&t&&r!==(r=Qo(e[0],"chat","chatbot","chatbot",e[3]))&&I(n,"href",r),4&t&&o!==(o=e[2]?"_blank":"_self")&&I(n,"target",o)},i:e,o:e,d(e){e&&$(n)}}}function di(e,t,n){let{url:s}=t,{ctaText:r}=t,{openInNewTab:o=!0}=t,{enableUTM:i=!0}=t;return e.$$set=e=>{"url"in e&&n(0,s=e.url),"ctaText"in e&&n(1,r=e.ctaText),"openInNewTab"in e&&n(2,o=e.openInNewTab),"enableUTM"in e&&n(3,i=e.enableUTM)},[s,r,o,i]}Te(hi,{displayTitle:{},isDemo:{type:"Boolean"},closable:{type:"Boolean"}},[],[],!0);class gi extends _e{constructor(e){super(),we(this,e,di,pi,i,{url:0,ctaText:1,openInNewTab:2,enableUTM:3},ui)}get url(){return this.$$.ctx[0]}set url(e){this.$$set({url:e}),se()}get ctaText(){return this.$$.ctx[1]}set ctaText(e){this.$$set({ctaText:e}),se()}get openInNewTab(){return this.$$.ctx[2]}set openInNewTab(e){this.$$set({openInNewTab:e}),se()}get enableUTM(){return this.$$.ctx[3]}set enableUTM(e){this.$$set({enableUTM:e}),se()}}function fi(e){b(e,"svelte-1ukhuw9",".message-container.svelte-1ukhuw9.svelte-1ukhuw9{display:flex;flex-direction:column;margin-bottom:10px;min-width:50%}.message-container.has-cta.svelte-1ukhuw9.svelte-1ukhuw9{max-width:100%}.user-message.svelte-1ukhuw9.svelte-1ukhuw9{margin-left:auto}.assistant-message.svelte-1ukhuw9.svelte-1ukhuw9,.human_agent-message.svelte-1ukhuw9.svelte-1ukhuw9{margin-right:auto}.system-message.svelte-1ukhuw9.svelte-1ukhuw9{margin-left:auto;margin-right:auto;text-align:center;font-style:italic;color:#888}.message.svelte-1ukhuw9.svelte-1ukhuw9{display:flex;align-items:flex-start;gap:8px}.message-icon.svelte-1ukhuw9.svelte-1ukhuw9{width:32px;height:32px;flex-shrink:0}.message-content.svelte-1ukhuw9.svelte-1ukhuw9{flex-grow:1;word-wrap:break-word;padding:5px 10px;border-radius:5px}.user-message.svelte-1ukhuw9 .message-content.svelte-1ukhuw9{background-color:var(--user-msg-bg);color:var(--user-msg-text)}.assistant-message.svelte-1ukhuw9 .message-content.svelte-1ukhuw9{background-color:var(--assistant-msg-bg);color:var(--assistant-msg-text)}.human_agent-message.svelte-1ukhuw9 .message-content.svelte-1ukhuw9{background-color:var(--human-agent-msg-bg);color:var(--human-agent-msg-text)}.message-content.svelte-1ukhuw9 a{color:var(--link-color)}.message-content ul,.message-content ol{padding-inline-start:20px}.message-links.svelte-1ukhuw9.svelte-1ukhuw9{display:flex;flex-direction:column;gap:5px;margin-top:5px}")}function mi(e,t,n){const s=e.slice();return s[6]=t[n],s}function bi(e){let t,n;return{c(){t=k("img"),l(t.src,n=e[1])||I(t,"src",n),I(t,"alt","User Icon"),I(t,"class","message-icon user-icon svelte-1ukhuw9")},m(e,n){w(e,t,n)},p(e,s){2&s&&!l(t.src,n=e[1])&&I(t,"src",n)},d(e){e&&$(t)}}}function yi(e){let t,n;return{c(){t=k("img"),l(t.src,n=e[2])||I(t,"src",n),I(t,"alt","Assistant Icon"),I(t,"class","message-icon assistant-icon svelte-1ukhuw9")},m(e,n){w(e,t,n)},p(e,s){4&s&&!l(t.src,n=e[2])&&I(t,"src",n)},d(e){e&&$(t)}}}function vi(e){let t,n;return{c(){t=k("img"),l(t.src,n=e[3])||I(t,"src",n),I(t,"alt","Human Agent Icon"),I(t,"class","message-icon human-agent-icon svelte-1ukhuw9")},m(e,n){w(e,t,n)},p(e,s){8&s&&!l(t.src,n=e[3])&&I(t,"src",n)},d(e){e&&$(t)}}}function xi(e){let t,n;return t=new gi({props:{url:e[0].url,ctaText:e[0].ctaText,openInNewTab:e[4],enableUTM:e[5]}}),{c(){ye(t.$$.fragment)},m(e,s){ve(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.url=e[0].url),1&n&&(s.ctaText=e[0].ctaText),16&n&&(s.openInNewTab=e[4]),32&n&&(s.enableUTM=e[5]),t.$set(s)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){ue(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function wi(e){let t,n,s=ge(e[0].links),r=[];for(let t=0;t<s.length;t+=1)r[t]=$i(mi(e,s,t));const o=e=>ue(r[e],1,1,(()=>{r[e]=null}));return{c(){t=k("div");for(let e=0;e<r.length;e+=1)r[e].c();I(t,"class","message-links svelte-1ukhuw9")},m(e,s){w(e,t,s);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null);n=!0},p(e,n){if(49&n){let i;for(s=ge(e[0].links),i=0;i<s.length;i+=1){const o=mi(e,s,i);r[i]?(r[i].p(o,n),he(r[i],1)):(r[i]=$i(o),r[i].c(),he(r[i],1),r[i].m(t,null))}for(le(),i=s.length;i<r.length;i+=1)o(i);ce()}},i(e){if(!n){for(let e=0;e<s.length;e+=1)he(r[e]);n=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)ue(r[e]);n=!1},d(e){e&&$(t),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(r,e)}}}function $i(e){let t,n;return t=new gi({props:{url:e[6].url,ctaText:e[6].text,openInNewTab:e[4],enableUTM:e[5]}}),{c(){ye(t.$$.fragment)},m(e,s){ve(t,e,s),n=!0},p(e,n){const s={};1&n&&(s.url=e[6].url),1&n&&(s.ctaText=e[6].text),16&n&&(s.openInNewTab=e[4]),32&n&&(s.enableUTM=e[5]),t.$set(s)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){ue(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function ki(e){let t,n,s=e[0].productCarousel+"";return{c(){t=new R(!1),n=B(),t.a=n},m(e,r){t.m(s,e,r),w(e,n,r)},p(e,n){1&n&&s!==(s=e[0].productCarousel+"")&&t.p(s)},d(e){e&&($(n),t.d())}}}function Ti(e){let t,n,s,r,o,i,a,l,c,h,u,p=e[0].content+"",d="user"===e[0].sender&&e[1]&&bi(e),g="assistant"===e[0].sender&&e[2]&&yi(e),f="human_agent"===e[0].sender&&e[3]&&vi(e),b=e[0].url&&xi(e),y=e[0].links&&e[0].links.length>0&&wi(e),v=e[0].productCarousel&&ki(e);return{c(){t=k("div"),n=k("div"),d&&d.c(),s=E(),g&&g.c(),r=E(),f&&f.c(),o=E(),i=k("div"),a=E(),b&&b.c(),l=E(),y&&y.c(),c=E(),v&&v.c(),I(i,"class","message-content svelte-1ukhuw9"),I(n,"class","message svelte-1ukhuw9"),I(t,"class",h="message-container "+e[0].sender+"-message "+(e[0].url||e[0].links&&e[0].links.length>0?"has-cta":"")+" svelte-1ukhuw9")},m(e,h){w(e,t,h),m(t,n),d&&d.m(n,null),m(n,s),g&&g.m(n,null),m(n,r),f&&f.m(n,null),m(n,o),m(n,i),i.innerHTML=p,m(t,a),b&&b.m(t,null),m(t,l),y&&y.m(t,null),m(t,c),v&&v.m(t,null),u=!0},p(e,[a]){"user"===e[0].sender&&e[1]?d?d.p(e,a):(d=bi(e),d.c(),d.m(n,s)):d&&(d.d(1),d=null),"assistant"===e[0].sender&&e[2]?g?g.p(e,a):(g=yi(e),g.c(),g.m(n,r)):g&&(g.d(1),g=null),"human_agent"===e[0].sender&&e[3]?f?f.p(e,a):(f=vi(e),f.c(),f.m(n,o)):f&&(f.d(1),f=null),(!u||1&a)&&p!==(p=e[0].content+"")&&(i.innerHTML=p),e[0].url?b?(b.p(e,a),1&a&&he(b,1)):(b=xi(e),b.c(),he(b,1),b.m(t,l)):b&&(le(),ue(b,1,1,(()=>{b=null})),ce()),e[0].links&&e[0].links.length>0?y?(y.p(e,a),1&a&&he(y,1)):(y=wi(e),y.c(),he(y,1),y.m(t,c)):y&&(le(),ue(y,1,1,(()=>{y=null})),ce()),e[0].productCarousel?v?v.p(e,a):(v=ki(e),v.c(),v.m(t,null)):v&&(v.d(1),v=null),(!u||1&a&&h!==(h="message-container "+e[0].sender+"-message "+(e[0].url||e[0].links&&e[0].links.length>0?"has-cta":"")+" svelte-1ukhuw9"))&&I(t,"class",h)},i(e){u||(he(b),he(y),u=!0)},o(e){ue(b),ue(y),u=!1},d(e){e&&$(t),d&&d.d(),g&&g.d(),f&&f.d(),b&&b.d(),y&&y.d(),v&&v.d()}}}function _i(e,t,n){let{message:s}=t,{userMessageIcon:r=null}=t,{assistantMessageIcon:o=null}=t,{humanAgentMessageIcon:i=null}=t,{openInNewTab:a=!0}=t,{enableUTM:l=!0}=t;return e.$$set=e=>{"message"in e&&n(0,s=e.message),"userMessageIcon"in e&&n(1,r=e.userMessageIcon),"assistantMessageIcon"in e&&n(2,o=e.assistantMessageIcon),"humanAgentMessageIcon"in e&&n(3,i=e.humanAgentMessageIcon),"openInNewTab"in e&&n(4,a=e.openInNewTab),"enableUTM"in e&&n(5,l=e.enableUTM)},[s,r,o,i,a,l]}Te(gi,{url:{},ctaText:{},openInNewTab:{type:"Boolean"},enableUTM:{type:"Boolean"}},[],[],!0);class Ei extends _e{constructor(e){super(),we(this,e,_i,Ti,i,{message:0,userMessageIcon:1,assistantMessageIcon:2,humanAgentMessageIcon:3,openInNewTab:4,enableUTM:5},fi)}get message(){return this.$$.ctx[0]}set message(e){this.$$set({message:e}),se()}get userMessageIcon(){return this.$$.ctx[1]}set userMessageIcon(e){this.$$set({userMessageIcon:e}),se()}get assistantMessageIcon(){return this.$$.ctx[2]}set assistantMessageIcon(e){this.$$set({assistantMessageIcon:e}),se()}get humanAgentMessageIcon(){return this.$$.ctx[3]}set humanAgentMessageIcon(e){this.$$set({humanAgentMessageIcon:e}),se()}get openInNewTab(){return this.$$.ctx[4]}set openInNewTab(e){this.$$set({openInNewTab:e}),se()}get enableUTM(){return this.$$.ctx[5]}set enableUTM(e){this.$$set({enableUTM:e}),se()}}function Bi(e){b(e,"svelte-1wq62en",".date-separator.svelte-1wq62en{text-align:center;margin:10px 0;font-size:0.8em;color:#888}#chat-messages .date-separator:first-child{margin-top:0}")}function Ai(t){let n,s,r=Ii(t[0])+"";return{c(){n=k("div"),s=_(r),I(n,"class","date-separator svelte-1wq62en")},m(e,t){w(e,n,t),m(n,s)},p(e,[t]){1&t&&r!==(r=Ii(e[0])+"")&&C(s,r)},i:e,o:e,d(e){e&&$(n)}}}function Ii(e){return new Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))}function Ci(e,t,n){let{date:s}=t;return e.$$set=e=>{"date"in e&&n(0,s=e.date)},[s]}Te(Ei,{message:{},userMessageIcon:{},assistantMessageIcon:{},humanAgentMessageIcon:{},openInNewTab:{type:"Boolean"},enableUTM:{type:"Boolean"}},[],[],!0);class Mi extends _e{constructor(e){super(),we(this,e,Ci,Ai,i,{date:0},Bi)}get date(){return this.$$.ctx[0]}set date(e){this.$$set({date:e}),se()}}function Si(e){b(e,"svelte-cx42nv","#chat-messages-wrapper.svelte-cx42nv.svelte-cx42nv{position:relative;display:flex;flex-direction:column;flex-grow:1;overflow:hidden}#chat-messages.svelte-cx42nv.svelte-cx42nv{display:flex;flex-direction:column;flex-grow:1;overflow-y:auto;padding:10px;background-color:var(--messages-bg);color:var(--primary-text-color);scrollbar-gutter:stable both-edges}.scroll-to-bottom.svelte-cx42nv.svelte-cx42nv{position:absolute;bottom:15px;left:50%;transform:translateX(-50%);background-color:var(--chat-btn-bg, #000);color:var(--chat-btn-text, #fff);border:none;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 5px rgba(0,0,0,0.2);transition:opacity 0.3s, transform 0.3s;opacity:0.8}.scroll-to-bottom.svelte-cx42nv.svelte-cx42nv:hover{opacity:1;transform:translateX(-50%) scale(1.1)}.loading-container.svelte-cx42nv.svelte-cx42nv{display:flex;align-items:center;padding:8px 12px;background-color:var(--loading-bg);border-radius:16px;max-width:fit-content;margin:5px 0}.loading-indicator.svelte-cx42nv.svelte-cx42nv{display:flex;align-items:baseline;gap:4px}.loading-text.svelte-cx42nv.svelte-cx42nv{color:var(--loading-text-color);font-size:14px}.typing-dots.svelte-cx42nv.svelte-cx42nv{display:flex;gap:2px;padding-bottom:2px;padding-left:2px}.typing-dots.svelte-cx42nv span.svelte-cx42nv{width:2px;height:2px;background-color:var(--loading-dot-color);border-radius:50%;display:inline-block;animation:svelte-cx42nv-customBounce 1s infinite}.typing-dots.svelte-cx42nv span.svelte-cx42nv:nth-child(1){animation-delay:0ms}.typing-dots.svelte-cx42nv span.svelte-cx42nv:nth-child(2){animation-delay:200ms}.typing-dots.svelte-cx42nv span.svelte-cx42nv:nth-child(3){animation-delay:400ms}@keyframes svelte-cx42nv-customBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-5px)}}")}function Oi(e,t,n){const s=e.slice();return s[16]=t[n],s[18]=n,s}function Hi(e){let t,n;return t=new Ei({props:{message:e[16],userMessageIcon:e[4],assistantMessageIcon:e[5],humanAgentMessageIcon:e[6],openInNewTab:e[7],enableUTM:e[8]}}),{c(){ye(t.$$.fragment)},m(e,s){ve(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.message=e[16]),16&n&&(s.userMessageIcon=e[4]),32&n&&(s.assistantMessageIcon=e[5]),64&n&&(s.humanAgentMessageIcon=e[6]),128&n&&(s.openInNewTab=e[7]),256&n&&(s.enableUTM=e[8]),t.$set(s)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){ue(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Ri(e){let t,n;return t=new Mi({props:{date:e[16].date}}),{c(){ye(t.$$.fragment)},m(e,s){ve(t,e,s),n=!0},p(e,n){const s={};2&n&&(s.date=e[16].date),t.$set(s)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){ue(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Li(e,t){let n,s,r,o,i;const a=[Ri,Hi],l=[];function c(e,t){return"date"===e[16].type?0:1}return s=c(t),r=l[s]=a[s](t),{key:e,first:null,c(){n=B(),r.c(),o=B(),this.first=n},m(e,t){w(e,n,t),l[s].m(e,t),w(e,o,t),i=!0},p(e,n){let i=s;s=c(t=e),s===i?l[s].p(t,n):(le(),ue(l[i],1,1,(()=>{l[i]=null})),ce(),r=l[s],r?r.p(t,n):(r=l[s]=a[s](t),r.c()),he(r,1),r.m(o.parentNode,o))},i(e){i||(he(r),i=!0)},o(e){ue(r),i=!1},d(e){e&&($(n),$(o)),l[s].d(e)}}}function Pi(e){let t,n,s,r,o,i,a=e[3].message+"";return{c(){t=k("div"),n=k("div"),s=k("span"),r=_(a),o=E(),i=k("div"),i.innerHTML='<span class="svelte-cx42nv"></span><span class="svelte-cx42nv"></span><span class="svelte-cx42nv"></span>',I(s,"class","loading-text svelte-cx42nv"),I(i,"class","typing-dots svelte-cx42nv"),I(n,"class","loading-indicator svelte-cx42nv"),I(t,"class","loading-container svelte-cx42nv"),I(t,"aria-live","assertive")},m(e,a){w(e,t,a),m(t,n),m(n,s),m(s,r),m(n,o),m(n,i)},p(e,t){8&t&&a!==(a=e[3].message+"")&&C(r,a)},d(e){e&&$(t)}}}function Ni(t){let n,s,r;return{c(){n=k("button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14m0 0l-4-4m4 4l4-4"></path></svg>',I(n,"class","scroll-to-bottom svelte-cx42nv")},m(e,o){w(e,n,o),s||(r=A(n,"click",t[14]),s=!0)},p:e,d(e){e&&$(n),s=!1,r()}}}function Di(e){let t,n,s,r,o,i=[],a=new Map,l=ge(e[1]);const c=e=>"date"===e[16].type?"date:"+e[16].date:e[18];for(let t=0;t<l.length;t+=1){let n=Oi(e,l,t),s=c(n);a.set(s,i[t]=Li(s,n))}let h=!e[2]&&e[3]?.message&&Pi(e),u=e[9]&&Ni(e);return{c(){t=k("div"),n=k("div");for(let e=0;e<i.length;e+=1)i[e].c();s=E(),h&&h.c(),r=E(),u&&u.c(),I(n,"id","chat-messages"),I(n,"aria-live","polite"),I(n,"class","svelte-cx42nv"),I(t,"id","chat-messages-wrapper"),I(t,"class","svelte-cx42nv")},m(a,l){w(a,t,l),m(t,n);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(n,null);m(n,s),h&&h.m(n,null),e[13](n),m(t,r),u&&u.m(t,null),o=!0},p(e,[r]){498&r&&(l=ge(e[1]),le(),i=be(i,r,c,0,e,l,a,n,me,Li,s,Oi),ce()),!e[2]&&e[3]?.message?h?h.p(e,r):(h=Pi(e),h.c(),h.m(n,null)):h&&(h.d(1),h=null),e[9]?u?u.p(e,r):(u=Ni(e),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},i(e){if(!o){for(let e=0;e<l.length;e+=1)he(i[e]);o=!0}},o(e){for(let e=0;e<i.length;e+=1)ue(i[e]);o=!1},d(n){n&&$(t);for(let e=0;e<i.length;e+=1)i[e].d();h&&h.d(),e[13](null),u&&u.d()}}}function Ui(e,t,n){let{messages:s=[]}=t,{isDemo:r=!1}=t,{loadingState:o=null}=t,{userMessageIcon:i=null}=t,{assistantMessageIcon:a=null}=t,{humanAgentMessageIcon:l=null}=t,{openInNewTab:c=!0}=t,{enableUTM:h=!0}=t,{element:u}=t,p=!1;async function d(e="smooth"){await W(),u&&u.scrollTo({top:u.scrollHeight,behavior:e})}function g(){if(!u)return;const{scrollTop:e,scrollHeight:t,clientHeight:s}=u;n(9,p=t-e-s>1e3)}F((()=>(u.addEventListener("scroll",g),r||d("auto"),()=>{u&&u.removeEventListener("scroll",g)})));return e.$$set=e=>{"messages"in e&&n(1,s=e.messages),"isDemo"in e&&n(2,r=e.isDemo),"loadingState"in e&&n(3,o=e.loadingState),"userMessageIcon"in e&&n(4,i=e.userMessageIcon),"assistantMessageIcon"in e&&n(5,a=e.assistantMessageIcon),"humanAgentMessageIcon"in e&&n(6,l=e.humanAgentMessageIcon),"openInNewTab"in e&&n(7,c=e.openInNewTab),"enableUTM"in e&&n(8,h=e.enableUTM),"element"in e&&n(0,u=e.element)},e.$$.update=()=>{12&e.$$.dirty&&o&&o.message&&(r||d("smooth"))},[u,s,r,o,i,a,l,c,h,p,d,async function(){if(await W(),!u)return;const e=u.querySelectorAll(".message-container.user-message");if(0===e.length)return;const t=e[e.length-1];if(t){const e=t.offsetHeight,s=u.offsetHeight;if(n(0,u.style.paddingBottom="0px",u),e>s){const e=t.offsetTop;u.scrollTo({top:e,behavior:"smooth"})}else n(0,u.scrollTop=u.scrollHeight,u)}},function(){if(!u)return;u.querySelectorAll(".message-container").length,n(0,u.style.paddingBottom="0px",u)},function(e){V[e?"unshift":"push"]((()=>{u=e,n(0,u)}))},()=>d()]}Te(Mi,{date:{}},[],[],!0);class zi extends _e{constructor(e){super(),we(this,e,Ui,Di,i,{messages:1,isDemo:2,loadingState:3,userMessageIcon:4,assistantMessageIcon:5,humanAgentMessageIcon:6,openInNewTab:7,enableUTM:8,element:0,prepareForStreaming:11,cleanupAfterStreaming:12},Si)}get messages(){return this.$$.ctx[1]}set messages(e){this.$$set({messages:e}),se()}get isDemo(){return this.$$.ctx[2]}set isDemo(e){this.$$set({isDemo:e}),se()}get loadingState(){return this.$$.ctx[3]}set loadingState(e){this.$$set({loadingState:e}),se()}get userMessageIcon(){return this.$$.ctx[4]}set userMessageIcon(e){this.$$set({userMessageIcon:e}),se()}get assistantMessageIcon(){return this.$$.ctx[5]}set assistantMessageIcon(e){this.$$set({assistantMessageIcon:e}),se()}get humanAgentMessageIcon(){return this.$$.ctx[6]}set humanAgentMessageIcon(e){this.$$set({humanAgentMessageIcon:e}),se()}get openInNewTab(){return this.$$.ctx[7]}set openInNewTab(e){this.$$set({openInNewTab:e}),se()}get enableUTM(){return this.$$.ctx[8]}set enableUTM(e){this.$$set({enableUTM:e}),se()}get element(){return this.$$.ctx[0]}set element(e){this.$$set({element:e}),se()}get prepareForStreaming(){return this.$$.ctx[11]}get cleanupAfterStreaming(){return this.$$.ctx[12]}}function ji(e){b(e,"svelte-bmhc9g",".quick-messages-flow.svelte-bmhc9g{display:flex;flex-wrap:nowrap;gap:8px;overflow-x:auto;padding:0 10px 10px;background-color:var(--messages-bg);flex-shrink:0;scrollbar-width:thin;scrollbar-color:var(--disclaimer-text) transparent}.quick-messages-flow.svelte-bmhc9g::-webkit-scrollbar{height:5px}.quick-messages-flow.svelte-bmhc9g::-webkit-scrollbar-track{background:transparent}.quick-messages-flow.svelte-bmhc9g::-webkit-scrollbar-thumb{background-color:var(--disclaimer-text);border-radius:10px}.quick-message-btn.svelte-bmhc9g{flex-shrink:0;padding:6px 12px;border-radius:16px;border:1px solid var(--disclaimer-text);background-color:transparent;color:var(--primary-text-color);cursor:pointer;font-size:14px;transition:background-color 0.2s;white-space:nowrap}.quick-message-btn.svelte-bmhc9g:hover:not(:disabled){background-color:var(--container-bg)}.quick-message-btn.svelte-bmhc9g:disabled{cursor:not-allowed;opacity:0.6}")}function Fi(e,t,n){const s=e.slice();return s[5]=t[n],s}function Gi(e,t){let n,s,r,o,i,a=t[5]+"";function l(){return t[3](t[5])}return{key:e,first:null,c(){n=k("button"),s=_(a),r=E(),I(n,"class","quick-message-btn svelte-bmhc9g"),n.disabled=t[1],this.first=n},m(e,t){w(e,n,t),m(n,s),m(n,r),o||(i=A(n,"click",l),o=!0)},p(e,r){t=e,1&r&&a!==(a=t[5]+"")&&C(s,a),2&r&&(n.disabled=t[1])},d(e){e&&$(n),o=!1,i()}}}function qi(e){let t,n,s,r=[],o=new Map,i=ge(e[0]);const a=e=>e[5];for(let t=0;t<i.length;t+=1){let n=Fi(e,i,t),s=a(n);o.set(s,r[t]=Gi(s,n))}return{c(){t=k("div");for(let e=0;e<r.length;e+=1)r[e].c();I(t,"class","quick-messages-flow svelte-bmhc9g")},m(e,n){w(e,t,n);for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,null);s=!0},p(e,[n]){7&n&&(i=ge(e[0]),r=be(r,n,a,0,e,i,o,t,fe,Gi,null,Fi))},i(e){s||(e&&J((()=>{s&&(n||(n=de(t,Ko,{duration:300},!0)),n.run(1))})),s=!0)},o(e){e&&(n||(n=de(t,Ko,{duration:300},!1)),n.run(0)),s=!1},d(e){e&&$(t);for(let e=0;e<r.length;e+=1)r[e].d();e&&n&&n.end()}}}function Vi(e,t,n){let{predefinedQuestions:s=[]}=t,{isDemo:r=!1}=t;const o=G();function i(e){o("sendQuickMessage",e)}return e.$$set=e=>{"predefinedQuestions"in e&&n(0,s=e.predefinedQuestions),"isDemo"in e&&n(1,r=e.isDemo)},[s,r,i,e=>i(e)]}Te(zi,{messages:{},isDemo:{type:"Boolean"},loadingState:{},userMessageIcon:{},assistantMessageIcon:{},humanAgentMessageIcon:{},openInNewTab:{type:"Boolean"},enableUTM:{type:"Boolean"},element:{}},[],["prepareForStreaming","cleanupAfterStreaming"],!0);class Xi extends _e{constructor(e){super(),we(this,e,Vi,qi,i,{predefinedQuestions:0,isDemo:1},ji)}get predefinedQuestions(){return this.$$.ctx[0]}set predefinedQuestions(e){this.$$set({predefinedQuestions:e}),se()}get isDemo(){return this.$$.ctx[1]}set isDemo(e){this.$$set({isDemo:e}),se()}}function Qi(e){b(e,"svelte-13l78wr","#chat-input.svelte-13l78wr{display:flex;padding:10px 10px 0 10px;background-color:var(--header-bg);flex-shrink:0}#user-input.svelte-13l78wr{flex-grow:1;padding:10px;border:1px solid #ddd;border-radius:3px;background-color:var(--input-bg);color:var(--input-text);font-size:1em}#user-input.svelte-13l78wr:disabled{background-color:var(--disabled-input-bg);cursor:not-allowed}#send-button.svelte-13l78wr{background-color:var(--cta-btn-bg);color:var(--cta-btn-text);border:none;padding:10px 15px;margin-left:5px;cursor:pointer;border-radius:3px;text-wrap:nowrap;min-width:60px;transition:background-color 0.3s, color 0.3s}#send-button.svelte-13l78wr:hover:not(:disabled){background-color:var(--cta-btn-hover-bg, var(--cta-hover-bg));color:var(--cta-btn-hover-text, var(--cta-hover-text))}#send-button.svelte-13l78wr:disabled{background-color:var(--disabled-button-bg);cursor:not-allowed;opacity:0.6}")}function Ki(t){let n,s,o,i,a,l,c,h,u,p,d=t[4]("widget.sendButton")+"";return{c(){n=k("div"),s=k("input"),a=E(),l=k("button"),c=_(d),I(s,"type","text"),I(s,"id","user-input"),I(s,"placeholder",o=t[1]?t[4]("widget.placeholderDisabled"):t[4]("widget.placeholder")),s.disabled=t[1],I(s,"aria-label",i=t[4]("widget.placeholder")),I(s,"class","svelte-13l78wr"),I(l,"id","send-button"),l.disabled=h=t[1]||!!t[2]||!t[0].trim(),I(l,"class","svelte-13l78wr"),I(n,"id","chat-input"),I(n,"class","svelte-13l78wr")},m(e,r){w(e,n,r),m(n,s),M(s,t[0]),t[9](s),m(n,a),m(n,l),m(l,c),u||(p=[A(s,"input",t[8]),A(s,"keydown",t[10]),A(s,"input",t[6]),A(l,"click",t[5])],u=!0)},p(e,[t]){18&t&&o!==(o=e[1]?e[4]("widget.placeholderDisabled"):e[4]("widget.placeholder"))&&I(s,"placeholder",o),2&t&&(s.disabled=e[1]),16&t&&i!==(i=e[4]("widget.placeholder"))&&I(s,"aria-label",i),1&t&&s.value!==e[0]&&M(s,e[0]),16&t&&d!==(d=e[4]("widget.sendButton")+"")&&C(c,d),7&t&&h!==(h=e[1]||!!e[2]||!e[0].trim())&&(l.disabled=h)},i:e,o:e,d(e){e&&$(n),t[9](null),u=!1,r(p)}}}function Zi(e,t,n){let s;h(e,us,(e=>n(4,s=e)));let r,{userInput:o=""}=t,{isDemo:i=!1}=t,{loadingState:a=null}=t;const l=G();function c(){l("sendMessage")}return e.$$set=e=>{"userInput"in e&&n(0,o=e.userInput),"isDemo"in e&&n(1,i=e.isDemo),"loadingState"in e&&n(2,a=e.loadingState)},[o,i,a,r,s,c,function(){l("handleInput")},function(){r.focus()},function(){o=this.value,n(0,o)},function(e){V[e?"unshift":"push"]((()=>{r=e,n(3,r)}))},e=>"Enter"===e.key&&c()]}Te(Xi,{predefinedQuestions:{},isDemo:{type:"Boolean"}},[],[],!0);class Yi extends _e{constructor(e){super(),we(this,e,Zi,Ki,i,{userInput:0,isDemo:1,loadingState:2,focusInput:7},Qi)}get userInput(){return this.$$.ctx[0]}set userInput(e){this.$$set({userInput:e}),se()}get isDemo(){return this.$$.ctx[1]}set isDemo(e){this.$$set({isDemo:e}),se()}get loadingState(){return this.$$.ctx[2]}set loadingState(e){this.$$set({loadingState:e}),se()}get focusInput(){return this.$$.ctx[7]}}function Wi(e){b(e,"svelte-odmh4j","#chat-footer.svelte-odmh4j.svelte-odmh4j{text-align:center;font-size:0.8rem;padding:10px;background-color:var(--header-bg);color:var(--header-text);flex-shrink:0}#powered-by.svelte-odmh4j.svelte-odmh4j{text-align:center;font-size:0.7rem;padding:5px 10px 10px;background-color:var(--header-bg);color:var(--header-text);flex-shrink:0}#powered-by.svelte-odmh4j a.svelte-odmh4j{color:var(--header-text);text-decoration:none}#powered-by.svelte-odmh4j a.svelte-odmh4j:hover{text-decoration:underline}")}function Ji(e){let t,n,s,r,o=e[2]("widget.poweredBy")+"";return{c(){t=k("div"),n=_(o),s=E(),r=k("a"),r.textContent="Autocust",I(r,"href","https://www.autocust.it"),I(r,"target","_blank"),I(r,"rel","noopener noreferrer"),I(r,"class","svelte-odmh4j"),I(t,"id","powered-by"),I(t,"class","svelte-odmh4j")},m(e,o){w(e,t,o),m(t,n),m(t,s),m(t,r)},p(e,t){4&t&&o!==(o=e[2]("widget.poweredBy")+"")&&C(n,o)},d(e){e&&$(t)}}}function ea(t){let n,s,r,o,i=t[1]&&Ji(t);return{c(){n=k("div"),s=_(t[0]),r=E(),i&&i.c(),o=B(),I(n,"id","chat-footer"),I(n,"class","svelte-odmh4j")},m(e,t){w(e,n,t),m(n,s),w(e,r,t),i&&i.m(e,t),w(e,o,t)},p(e,[t]){1&t&&C(s,e[0]),e[1]?i?i.p(e,t):(i=Ji(e),i.c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},i:e,o:e,d(e){e&&($(n),$(r),$(o)),i&&i.d(e)}}}function ta(e,t,n){let s;h(e,us,(e=>n(2,s=e)));let{displayFooterText:r=""}=t,{showPoweredBy:o=!0}=t;return e.$$set=e=>{"displayFooterText"in e&&n(0,r=e.displayFooterText),"showPoweredBy"in e&&n(1,o=e.showPoweredBy)},[r,o,s]}Te(Yi,{userInput:{},isDemo:{type:"Boolean"},loadingState:{}},[],["focusInput"],!0);class na extends _e{constructor(e){super(),we(this,e,ta,ea,i,{displayFooterText:0,showPoweredBy:1},Wi)}get displayFooterText(){return this.$$.ctx[0]}set displayFooterText(e){this.$$set({displayFooterText:e}),se()}get showPoweredBy(){return this.$$.ctx[1]}set showPoweredBy(e){this.$$set({showPoweredBy:e}),se()}}function sa(e){b(e,"svelte-micev7",":host{font-family:system-ui, Arial, sans-serif;color:var(--primary-text-color, #222);background:none;line-height:1.5}#chat-widget.svelte-micev7.svelte-micev7,#chat-widget.svelte-micev7 .svelte-micev7{font-family:inherit;font-size:inherit;line-height:inherit;font-weight:normal;font-style:normal;text-transform:none;letter-spacing:normal;text-shadow:none;box-sizing:border-box}.theme-light.svelte-micev7.svelte-micev7{--container-bg:#e0e0e0;--header-bg:#e8e8e8;--header-text:#000000;--messages-bg:#ffffff;--input-area-bg:#e8e8e8;--input-bg:#ffffff;--input-text:#000000;--disclaimer-text:#656565;--primary-text-color:#000000;--link-color:#000000;--cta-hover-bg:#000000;--cta-hover-text:#ffffff;--product-card-bg:#ffffff;--product-card-shadow:rgba(0, 0, 0, 0.1);--product-border-color:#f8f8f8;--add-to-cart-border-color:#000000;--add-to-cart-hover-bg:rgba(0, 0, 0, 0.05);--loading-bg:#f8f8f8;--loading-text-color:#666;--loading-dot-color:#666;--disabled-input-bg:#eeeeee;--disabled-button-bg:#cccccc}.theme-dark.svelte-micev7.svelte-micev7{--container-bg:#2a2a2a;--header-bg:#1e1e1e;--header-text:#ffffff;--messages-bg:#333333;--input-area-bg:#1e1e1e;--input-bg:#4a4a4a;--input-text:#ffffff;--disclaimer-text:#aaaaaa;--primary-text-color:#ffffff;--link-color:#eeeeee;--cta-hover-bg:#ffffff;--cta-hover-text:#000000;--product-card-bg:#3a3a3a;--product-card-shadow:rgba(255, 255, 255, 0.1);--product-border-color:#444444;--add-to-cart-border-color:#ffffff;--add-to-cart-hover-bg:rgba(255, 255, 255, 0.1);--loading-bg:#4a4a4a;--loading-text-color:#cccccc;--loading-dot-color:#cccccc;--disabled-input-bg:#555555;--disabled-button-bg:#777777}#chat-widget.svelte-micev7.svelte-micev7{position:fixed;z-index:1000;font-family:Arial, sans-serif;display:flex;gap:10px;font-size:var(--widget-font-size, 16px)}.top-left.svelte-micev7.svelte-micev7{top:20px;left:20px;flex-direction:column;align-items:flex-start}.top-right.svelte-micev7.svelte-micev7{top:20px;right:20px;flex-direction:column;align-items:flex-end}.bottom-left.svelte-micev7.svelte-micev7{bottom:20px;left:20px;flex-direction:column-reverse;align-items:flex-start}.bottom-right.svelte-micev7.svelte-micev7{bottom:20px;right:20px;flex-direction:column-reverse;align-items:flex-end}#chat-widget.fullscreen.svelte-micev7.svelte-micev7{top:0;left:0;bottom:0;right:0;width:100vw;height:100vh;z-index:2147483647}#chat-widget.fullscreen.svelte-micev7 #chat-container.svelte-micev7{width:100%;height:100%;border-radius:0;box-shadow:none}#chat-container.svelte-micev7.svelte-micev7{width:var(--widget-width);height:var(--widget-height);background-color:var(--container-bg);border-radius:10px;box-shadow:0 0 10px rgba(0, 0, 0, 0.1);overflow:hidden;display:flex;flex-direction:column}@media(max-width: 480px){#chat-widget.svelte-micev7.svelte-micev7:not(.fullscreen){font-size:var(--widget-mobile-font-size, 12px)}#chat-widget.svelte-micev7:not(.fullscreen) #chat-container.svelte-micev7{width:90vw;height:calc(90vh - 20px)}}.product-carousel{display:flex;overflow-x:auto;padding:10px 0;margin-top:10px}.carousel-product{flex:0 0 auto;width:150px;margin-right:10px;background-color:var(--product-card-bg);border:1px solid var(--product-border-color);border-radius:5px;padding:10px;text-align:center;color:inherit;display:block;transition:transform 0.2s, box-shadow 0.2s}.carousel-product:hover{transform:translateY(-2px);box-shadow:0 4px 8px var(--product-card-shadow)}.product-link{text-decoration:none;color:inherit;display:block;position:relative}.discount-label{position:absolute;top:0;left:-10px;background-color:#666;color:white;padding:6px 10px;font-size:12px}.product-link img{width:100%;height:100px;object-fit:cover;margin-bottom:5px}.carousel-product h4{margin:5px 0;font-size:14px;color:var(--primary-text-color)}.product-brand{font-size:12px;color:var(--disclaimer-text);margin:5px 0}.product-price{margin:5px 0;color:var(--primary-text-color)}.current-price{font-weight:bold;font-size:16px}.regular-price{text-decoration:line-through #8B0000 2px;color:inherit;font-size:14px;margin-right:5px}.product-miniature__form{margin-top:10px}.add-to-cart{background-color:var(--cta-btn-bg);color:var(--cta-btn-text);border:none;border-radius:20px;padding:8px 12px;cursor:pointer;display:block;transition:background-color 0.3s, color 0.3s;margin:10px auto 0;text-decoration:none;font-size:14px;text-align:center;width:100%;box-sizing:border-box}.add-to-cart:hover{background-color:var(--cta-btn-hover-bg, var(--cta-hover-bg));color:var(--cta-btn-hover-text, var(--cta-hover-text))}")}function ra(e){let t,n;return t=new oi({props:{isChatVisible:e[34],isDemo:e[5],buttonIcon:e[1],buttonImageUrl:e[26],buttonOverlayText:e[27],buttonOverlayDelay:e[28]}}),t.$on("toggleChat",e[45]),{c(){ye(t.$$.fragment)},m(e,s){ve(t,e,s),n=!0},p(e,n){const s={};8&n[1]&&(s.isChatVisible=e[34]),32&n[0]&&(s.isDemo=e[5]),2&n[0]&&(s.buttonIcon=e[1]),67108864&n[0]&&(s.buttonImageUrl=e[26]),134217728&n[0]&&(s.buttonOverlayText=e[27]),268435456&n[0]&&(s.buttonOverlayDelay=e[28]),t.$set(s)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){ue(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function oa(e){let t,n,s,r,o,i,a,l,c,h,u,p,d,g;n=new hi({props:{displayTitle:e[43],isDemo:e[5],closable:e[6]}}),n.$on("resetChat",e[48]),n.$on("toggleChat",e[45]);let f={messages:e[33],isDemo:e[5],loadingState:e[37],userMessageIcon:e[23],assistantMessageIcon:e[24],humanAgentMessageIcon:e[25],openInNewTab:e[3],enableUTM:e[4]};r=new zi({props:f}),e[63](r);let b=e[29].length>0&&ia(e);function y(t){e[66](t)}let v={isDemo:e[5],loadingState:e[37]};return void 0!==e[36]&&(v.userInput=e[36]),a=new Yi({props:v}),e[65](a),V.push((()=>function(e,t,n){const s=e.$$.props[t];void 0!==s&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}(a,"userInput",y))),a.$on("sendMessage",e[46]),h=new na({props:{displayFooterText:e[42],showPoweredBy:e[22]}}),{c(){t=k("div"),ye(n.$$.fragment),s=E(),ye(r.$$.fragment),o=E(),b&&b.c(),i=E(),ye(a.$$.fragment),c=E(),ye(h.$$.fragment),I(t,"id","chat-container"),I(t,"class","svelte-micev7")},m(l,u){w(l,t,u),ve(n,t,null),m(t,s),ve(r,t,null),m(t,o),b&&b.m(t,null),m(t,i),ve(a,t,null),m(t,c),ve(h,t,null),p=!0,d||(g=A(t,"outroend",e[67]),d=!0)},p(s,o){e=s;const c={};4096&o[1]&&(c.displayTitle=e[43]),32&o[0]&&(c.isDemo=e[5]),64&o[0]&&(c.closable=e[6]),n.$set(c);const u={};4&o[1]&&(u.messages=e[33]),32&o[0]&&(u.isDemo=e[5]),64&o[1]&&(u.loadingState=e[37]),8388608&o[0]&&(u.userMessageIcon=e[23]),16777216&o[0]&&(u.assistantMessageIcon=e[24]),33554432&o[0]&&(u.humanAgentMessageIcon=e[25]),8&o[0]&&(u.openInNewTab=e[3]),16&o[0]&&(u.enableUTM=e[4]),r.$set(u),e[29].length>0?b?(b.p(e,o),536870912&o[0]&&he(b,1)):(b=ia(e),b.c(),he(b,1),b.m(t,i)):b&&(le(),ue(b,1,1,(()=>{b=null})),ce());const p={};var d;32&o[0]&&(p.isDemo=e[5]),64&o[1]&&(p.loadingState=e[37]),!l&&32&o[1]&&(l=!0,p.userInput=e[36],d=()=>l=!1,Q.push(d)),a.$set(p);const g={};2048&o[1]&&(g.displayFooterText=e[42]),4194304&o[0]&&(g.showPoweredBy=e[22]),h.$set(g)},i(s){p||(he(n.$$.fragment,s),he(r.$$.fragment,s),he(b),he(a.$$.fragment,s),he(h.$$.fragment,s),s&&J((()=>{p&&(u||(u=de(t,e[44],{duration:300,origin:e[41]},!0)),u.run(1))})),p=!0)},o(s){ue(n.$$.fragment,s),ue(r.$$.fragment,s),ue(b),ue(a.$$.fragment,s),ue(h.$$.fragment,s),s&&(u||(u=de(t,e[44],{duration:300,origin:e[41]},!1)),u.run(0)),p=!1},d(s){s&&$(t),xe(n),e[63](null),xe(r),b&&b.d(),e[65](null),xe(a),xe(h),s&&u&&u.end(),d=!1,g()}}}function ia(e){let t,n;return t=new Xi({props:{predefinedQuestions:e[29],isDemo:e[5]}}),t.$on("sendQuickMessage",e[64]),{c(){ye(t.$$.fragment)},m(e,s){ve(t,e,s),n=!0},p(e,n){const s={};536870912&n[0]&&(s.predefinedQuestions=e[29]),32&n[0]&&(s.isDemo=e[5]),t.$set(s)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){ue(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function aa(e){let t,n,s,r,o=(e[35]||e[5])&&ra(e),i=e[34]&&oa(e);return{c(){t=k("div"),o&&o.c(),n=E(),i&&i.c(),I(t,"id","chat-widget"),I(t,"class",s=e[2]+" theme-"+e[7]+" svelte-micev7"),O(t,"fullscreen",e[34]&&e[0]),S(t,"--widget-font-size",e[32]),S(t,"--widget-mobile-font-size",e[40]),S(t,"--widget-width",e[30]),S(t,"--widget-height",e[31]),S(t,"--user-msg-bg",e[8]),S(t,"--user-msg-text",e[9]),S(t,"--assistant-msg-bg",e[10]),S(t,"--assistant-msg-text",e[11]),S(t,"--human-agent-msg-bg",e[12]),S(t,"--human-agent-msg-text",e[13]),S(t,"--chat-btn-bg",e[14]),S(t,"--chat-btn-text",e[15]),S(t,"--cta-btn-bg",e[16]),S(t,"--cta-btn-text",e[17]),S(t,"--cta-btn-hover-bg",e[18]),S(t,"--cta-btn-hover-text",e[19]),S(t,"--header-bg",e[20]),S(t,"--header-text",e[21])},m(e,s){w(e,t,s),o&&o.m(t,null),m(t,n),i&&i.m(t,null),r=!0},p(e,a){e[35]||e[5]?o?(o.p(e,a),32&a[0]|16&a[1]&&he(o,1)):(o=ra(e),o.c(),he(o,1),o.m(t,n)):o&&(le(),ue(o,1,1,(()=>{o=null})),ce()),e[34]?i?(i.p(e,a),8&a[1]&&he(i,1)):(i=oa(e),i.c(),he(i,1),i.m(t,null)):i&&(le(),ue(i,1,1,(()=>{i=null})),ce()),(!r||132&a[0]&&s!==(s=e[2]+" theme-"+e[7]+" svelte-micev7"))&&I(t,"class",s),(!r||133&a[0]|8&a[1])&&O(t,"fullscreen",e[34]&&e[0]),2&a[1]&&S(t,"--widget-font-size",e[32]),512&a[1]&&S(t,"--widget-mobile-font-size",e[40]),1073741824&a[0]&&S(t,"--widget-width",e[30]),1&a[1]&&S(t,"--widget-height",e[31]),256&a[0]&&S(t,"--user-msg-bg",e[8]),512&a[0]&&S(t,"--user-msg-text",e[9]),1024&a[0]&&S(t,"--assistant-msg-bg",e[10]),2048&a[0]&&S(t,"--assistant-msg-text",e[11]),4096&a[0]&&S(t,"--human-agent-msg-bg",e[12]),8192&a[0]&&S(t,"--human-agent-msg-text",e[13]),16384&a[0]&&S(t,"--chat-btn-bg",e[14]),32768&a[0]&&S(t,"--chat-btn-text",e[15]),65536&a[0]&&S(t,"--cta-btn-bg",e[16]),131072&a[0]&&S(t,"--cta-btn-text",e[17]),262144&a[0]&&S(t,"--cta-btn-hover-bg",e[18]),524288&a[0]&&S(t,"--cta-btn-hover-text",e[19]),1048576&a[0]&&S(t,"--header-bg",e[20]),2097152&a[0]&&S(t,"--header-text",e[21])},i(e){r||(he(o),he(i),r=!0)},o(e){ue(o),ue(i),r=!1},d(e){e&&$(t),o&&o.d(),i&&i.d()}}}function la(e){if(!e)return[];const t=/\[([^\]]+)\]\(([^)]+)\)/g,n=[];let s;for(;null!==(s=t.exec(e));)n.push({text:s[1],url:s[2]});return n}function ca(e){try{const t=navigator.language||"en";return new Intl.NumberFormat(t,{style:"currency",currency:"EUR"}).format(e)}catch(t){return console.warn("Intl.NumberFormat failed, falling back to basic format.",t),`€${Number(e).toFixed(2)}`}}function ha(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function ua(e,t,n){let s,r,o,i,a,l,c,u,p,d,g;h(e,us,(e=>n(62,g=e)));let f,m,b,{title:y=null}=t,{apiUrl:v}=t,{initialMessage:x=null}=t,{buttonIcon:w="💬"}=t,{ctaText:$=null}=t,{position:k="bottom-right"}=t,{openInNewTab:T=!0}=t,{enableUTM:_=!0}=t,{startOpen:E=!1}=t,{fullScreen:B=!1}=t,{isDemo:A=!1}=t,{closable:I=!0}=t,{theme:C="light"}=t,{userMessageBgColor:M="#e0e0e0"}=t,{userMessageTextColor:S="#000000"}=t,{assistantMessageBgColor:O="#f8f8f8"}=t,{assistantMessageTextColor:H="#000000"}=t,{humanAgentMessageBgColor:R="#e0e0e0"}=t,{humanAgentMessageTextColor:L="#000000"}=t,{chatButtonBgColor:P="#000000"}=t,{chatButtonTextColor:N="#ffffff"}=t,{ctaButtonBgColor:D="#f8f8f8"}=t,{ctaButtonTextColor:U="#000000"}=t,{ctaButtonHoverBgColor:z=null}=t,{ctaButtonHoverTextColor:j=null}=t,{headerBgColor:G=null}=t,{headerTextColor:q=null}=t,{footerText:X=null}=t,{showPoweredBy:Q=!0}=t,{agentId:K="xyz"}=t,{context:Z=null}=t,{cms:Y=""}=t,{persistentSession:J=!1}=t,{sessionExpiration:ee=24}=t,{userMessageIcon:te=null}=t,{assistantMessageIcon:ne=null}=t,{humanAgentMessageIcon:se=null}=t,{buttonImageUrl:re=null}=t,{buttonOverlayText:oe=null}=t,{buttonOverlayDelay:ie=5e3}=t,{predefinedQuestions:ae=[]}=t,{width:le="340px"}=t,{height:ce="485px"}=t,{fontSize:he="16px"}=t,ue=E,pe=!E,de=[],ge="",fe=null,me="",be=!1,ye=!1;let ve=function(){const e=`aisa_agent_${K}`,t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?t[2]:null}()||ha();const xe=[{id:1,name:"Comfort Running Shoe",price:89.99,regular_price:110,image:"https://placehold.co/600x400",url:"#product-1",brand:"Brand A"},{id:2,name:"Lightweight Pro Shoe",price:120,regular_price:120,image:"https://placehold.co/600x400",url:"#product-2",brand:"Brand B"},{id:3,name:"Trail Max Shoe",price:99.5,regular_price:130,image:"https://placehold.co/600x400",url:"#product-3",brand:"Brand A"}],we=new _r.Renderer;we.link=function(e,t,n){const s=_r.Renderer.prototype.link.call(this,e,t,n);return T?s.replace("<a ",'<a target="_blank" '):s.replace("<a ",'<a target="_self" ')},_r.setOptions({renderer:we});const $e=(e,t)=>`chat_${e}_${t}`;function ke(e,t){if("undefined"!=typeof localStorage&&J&&!A)try{const n=$e("meta",e),s=$e("messages",e),r={lastActivity:Date.now()};localStorage.setItem(n,JSON.stringify(r)),localStorage.setItem(s,JSON.stringify(t))}catch(e){console.error("Error saving session to local storage:",e)}}function Te(e){if("undefined"!=typeof localStorage&&J&&!A)try{const t=$e("meta",e),n=$e("messages",e),s=$e("human_status",e);localStorage.removeItem(t),localStorage.removeItem(n),localStorage.removeItem(s),console.log(`Session ${e} cleared from local storage.`)}catch(e){console.error("Error clearing session from local storage:",e)}}function _e(e){let t=`aisa_agent_${K}=${e};path=/;SameSite=Lax`;if(J&&!A){t+=`;Max-Age=${2592e3}`}document.cookie=t}function Ee(){if(!A){if(!v)return console.error("API URL is not defined. WebSocket connection cannot be established."),void Ae(g("status.configErrorApi"),"assistant",{persist:!1});b=Xo(v+"/ws-chat",{path:"/ws",query:{sessionId:ve,agentId:K},transports:["websocket"],reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:16e3}),b.on("connect",(()=>{console.log("Socket.IO connected"),ye=!0,n(37,fe=null),Z&&b.emit("context",Z)})),b.on("thinking",(e=>{n(37,fe={type:"thinking",message:g("status.thinking")})})),b.on("searching",(e=>{n(37,fe={type:"searching",message:g("status.searching")})})),b.on("take_over",(e=>{!0===e.status?(n(60,be=!0),Ae(g("status.humanAgentJoined"),"system")):(n(60,be=!1),Ae(g("status.humanAgentLeft"),"system"),b&&b.disconnect(),Ee(),Ae(g("status.assistantBack"),"system"))})),b.on("token",(async e=>{try{""===me&&f?.prepareForStreaming();const t=e.content;n(37,fe={type:"writing"}),me+=t;const s=be?"human_agent":"assistant";if(de.length>0&&de[de.length-1].sender===s){const e=de.at(-1);e.content=_r.parse(me.replace(/【.*?】/g,"")),e.links=la(me),n(33,de=[...de]),J&&!A&&ke(ve,de)}else Ae(me,s);await W(),f?.element&&n(38,f.element.scrollTop=f.element.scrollHeight,f)}catch(e){console.error("Error processing token:",e)}})),b.on("products_search",(async()=>{try{const e=await async function(){if(A)return xe;try{const e=await fetch(`${v}/products/${ve}`,{headers:{"X-Agent-ID":K}});return e.ok?(await e.json()).products:(console.error(`Error fetching products: ${e.status} ${e.statusText}`),null)}catch(e){return console.error("Error fetching products:",e),null}}();if(e&&e.length>0){const t=Be(e),s=de[de.length-1];s&&"assistant"===s.sender&&(n(33,de[de.length-1]={...s,productCarousel:t},de),n(33,de=[...de]),J&&!A&&ke(ve,de))}}catch(e){console.error("Error processing products_search:",e)}})),b.on("done",(()=>{n(37,fe=null),f?.cleanupAfterStreaming(),J&&!A&&de.length>0&&ke(ve,de),me=""})),b.on("error",(e=>{n(37,fe=null),console.error("Socket.IO error:",e),Ae(g("status.error"),"assistant")})),b.on("disconnect",(e=>{console.log("Socket.IO disconnected:",e),ye=!1,ue&&"io client disconnect"!==e&&n(37,fe={type:"reconnecting",message:g("status.reconnecting")})})),b.on("reconnect_attempt",(e=>{console.log(`Attempting reconnect ${e}/${b.io.opts.reconnectionAttempts}`)})),b.on("reconnect_failed",(()=>{console.log("Max reconnect attempts reached."),n(37,fe=null),Ae(g("status.reconnectFailed"),"assistant",{persist:!1})}))}}function Be(e){if(!e||0===e.length)return"";return`<div class="product-carousel">${e.map((e=>`\n      <div class="carousel-product">\n        <a href="${Qo(e.url,"chat","chatbot","chatbot",_)}"\n           target="${T?"_blank":"_self"}"\n           class="product-link">\n          ${e.regular_price&&e.regular_price>e.price?`<span class="discount-label">${function(e,t){if(!t||t<=e)return null;const n=(t-e)/t*100;return`-${Math.round(n)}%`}(e.price,e.regular_price)}</span>`:""}\n          <img src="${e.image}" alt="${e.name}">\n          ${e.brand?`<div class="product-brand">${e.brand}</div>`:""}\n          <h4>${e.name}</h4>\n          <div class="product-price">\n            ${e.regular_price&&e.regular_price!==e.price?`<span class="regular-price">${ca(e.regular_price)}</span>`:""}\n            <span class="current-price">${ca(e.price)}</span>\n          </div>\n        </a>\n        ${function(e){const t=g("product.buyButton");if(A||!Y)return`<a href="${Qo(e.url,"chat","chatbot","chatbot_add_to_cart",_)}" target="_blank" class="add-to-cart"><span>${t}</span></a>`;if("prestashop"===Y)return`\n        <form class="product-miniature__form" action="/carrello" method="post">\n          <input type="hidden" name="id_product" value="${e.id}">\n          <input type="hidden" name="id_product_attribute" value="${e.id_product_attribute||0}">\n          <input type="hidden" name="qty" value="1" class="form-control input-qty">\n          <input type="hidden" name="token" value="${window.prestashop?.static_token||""}">\n          <input type="hidden" name="add" value="1">\n          <button class="btn add-to-cart" data-button-action="add-to-cart" type="submit"><span>${t}</span></button>\n        </form>`;return`<a href="${Qo(e.url,"chat","chatbot","chatbot_add_to_cart",_)}" target="${T?"_blank":"_self"}" class="add-to-cart"><span>${t}</span></a>`}(e)}\n      </div>\n    `)).join("")}</div>`}function Ae(e,t,s={}){let r,i=[];const a=!s.hasOwnProperty("persist")||s.persist,l=e||"";if("assistant"===t||"human_agent"===t){i=la(l);const e=l.replace(/【.*?】/g,"");r=_r.parse(e)}else"user"===t?r=_r.parse(l):"system"===t&&(r=l);const c=de.filter((e=>"date"!==e.type)).pop(),h=new Date;c&&new Date(c.date).toDateString()===h.toDateString()||n(33,de=[...de,{type:"date",date:h}]),n(33,de=[...de,{content:r,sender:t,links:i,productCarousel:s.productCarousel||"",url:s.url||"",ctaText:s.ctaText||o,date:new Date}]),J&&!A&&a&&ke(ve,de),W().then((()=>{}))}async function Ie(){if(A)return;const e=ge.trim();if(e&&ye&&!fe){Ae(e,"user"),n(36,ge=""),n(37,fe={type:"waiting"}),me="";try{b.emit("message",{chatInput:e})}catch(e){console.error("Error sending message:",e),Ae(g("status.sendError"),"assistant"),n(37,fe=null)}m?.focusInput()}}function Ce(e){A||fe||(n(36,ge=e),Ie())}function Me(){n(33,de=[]),Ae(x??c,"assistant"),Ae(u,"user");const e=Be(xe);Ae(p,"assistant",{url:d.url,ctaText:d.text,productCarousel:e}),W().then((()=>{}))}F((()=>{if(A)Me();else{_e(ve);let e=!1;if(J){const t=function(e){if("undefined"==typeof localStorage||!J||A)return null;try{const t=$e("meta",e),n=$e("messages",e),s=localStorage.getItem(t);if(!s)return null;const r=JSON.parse(s),o=parseFloat(ee)||24;if((Date.now()-r.lastActivity)/36e5>o)return console.log(`Session ${e} expired. Clearing from local storage.`),Te(e),null;const i=localStorage.getItem(n),a=$e("human_status",e),l=localStorage.getItem(a);if(!i)return null;const c=JSON.parse(i),h=l?JSON.parse(l):{isHumanAgentActive:!1};return console.log(`Loading session ${e} from local storage.`),{messages:c,...h}}catch(t){return console.error("Error loading session from local storage:",t),Te(e),null}}(ve);t&&(t.messages&&(n(33,de=function(e){if(!e||0===e.length)return[];const t=[];let n=null;return e.forEach((e=>{if("date"===e.type)return;const s=new Date(e.date),r=s.toDateString();r!==n&&(t.push({type:"date",date:s}),n=r),t.push(e)})),t}(t.messages)),e=!0),t.hasOwnProperty("isHumanAgentActive")&&n(60,be=t.isHumanAgentActive),ke(ve,de))}e||0!==de.length||Ae(r,"assistant"),E&&(ye||Ee()),!B&&function(){const e=navigator.userAgent||navigator.vendor||window.opera;return!!/android/i.test(e)||!(!/iPad|iPhone|iPod/.test(e)||window.MSStream)||!(!window.matchMedia||!window.matchMedia("(pointer: coarse)").matches)}()&&n(0,B=!0)}return()=>{A||b&&(b.disconnect(),ye=!1)}}));return e.$$set=e=>{"title"in e&&n(49,y=e.title),"apiUrl"in e&&n(50,v=e.apiUrl),"initialMessage"in e&&n(51,x=e.initialMessage),"buttonIcon"in e&&n(1,w=e.buttonIcon),"ctaText"in e&&n(52,$=e.ctaText),"position"in e&&n(2,k=e.position),"openInNewTab"in e&&n(3,T=e.openInNewTab),"enableUTM"in e&&n(4,_=e.enableUTM),"startOpen"in e&&n(53,E=e.startOpen),"fullScreen"in e&&n(0,B=e.fullScreen),"isDemo"in e&&n(5,A=e.isDemo),"closable"in e&&n(6,I=e.closable),"theme"in e&&n(7,C=e.theme),"userMessageBgColor"in e&&n(8,M=e.userMessageBgColor),"userMessageTextColor"in e&&n(9,S=e.userMessageTextColor),"assistantMessageBgColor"in e&&n(10,O=e.assistantMessageBgColor),"assistantMessageTextColor"in e&&n(11,H=e.assistantMessageTextColor),"humanAgentMessageBgColor"in e&&n(12,R=e.humanAgentMessageBgColor),"humanAgentMessageTextColor"in e&&n(13,L=e.humanAgentMessageTextColor),"chatButtonBgColor"in e&&n(14,P=e.chatButtonBgColor),"chatButtonTextColor"in e&&n(15,N=e.chatButtonTextColor),"ctaButtonBgColor"in e&&n(16,D=e.ctaButtonBgColor),"ctaButtonTextColor"in e&&n(17,U=e.ctaButtonTextColor),"ctaButtonHoverBgColor"in e&&n(18,z=e.ctaButtonHoverBgColor),"ctaButtonHoverTextColor"in e&&n(19,j=e.ctaButtonHoverTextColor),"headerBgColor"in e&&n(20,G=e.headerBgColor),"headerTextColor"in e&&n(21,q=e.headerTextColor),"footerText"in e&&n(54,X=e.footerText),"showPoweredBy"in e&&n(22,Q=e.showPoweredBy),"agentId"in e&&n(55,K=e.agentId),"context"in e&&n(56,Z=e.context),"cms"in e&&n(57,Y=e.cms),"persistentSession"in e&&n(58,J=e.persistentSession),"sessionExpiration"in e&&n(59,ee=e.sessionExpiration),"userMessageIcon"in e&&n(23,te=e.userMessageIcon),"assistantMessageIcon"in e&&n(24,ne=e.assistantMessageIcon),"humanAgentMessageIcon"in e&&n(25,se=e.humanAgentMessageIcon),"buttonImageUrl"in e&&n(26,re=e.buttonImageUrl),"buttonOverlayText"in e&&n(27,oe=e.buttonOverlayText),"buttonOverlayDelay"in e&&n(28,ie=e.buttonOverlayDelay),"predefinedQuestions"in e&&n(29,ae=e.predefinedQuestions),"width"in e&&n(30,le=e.width),"height"in e&&n(31,ce=e.height),"fontSize"in e&&n(32,he=e.fontSize)},e.$$.update=()=>{if(262144&e.$$.dirty[1]|1&e.$$.dirty[2]&&n(43,s=y??g("widget.title")),1048576&e.$$.dirty[1]|1&e.$$.dirty[2]&&(r=x??g("widget.initialMessage")),2097152&e.$$.dirty[1]|1&e.$$.dirty[2]&&(o=$??g("widget.ctaText")),8388608&e.$$.dirty[1]|1&e.$$.dirty[2]&&n(42,i=X??g("widget.footerText")),4&e.$$.dirty[0]&&n(41,a=k.replace("-"," ")),4&e.$$.dirty[1]&&de.some((e=>"user"===e.sender)),2&e.$$.dirty[1]&&n(40,l=he),1&e.$$.dirty[2]&&(c=g("demo.initialMessage")),1&e.$$.dirty[2]&&(u=g("demo.userMessage")),1&e.$$.dirty[2]&&(p=g("demo.botReply")),1&e.$$.dirty[2]&&(d={text:g("demo.ctaText"),url:"#product-xyz"}),32&e.$$.dirty[0]|1744830464&e.$$.dirty[1]&&J&&!A&&"undefined"!=typeof localStorage)try{const e=$e("human_status",ve);localStorage.setItem(e,JSON.stringify({isHumanAgentActive:be}))}catch(e){console.error("Error saving human agent status to local storage:",e)}},[B,w,k,T,_,A,I,C,M,S,O,H,R,L,P,N,D,U,z,j,G,q,Q,te,ne,se,re,oe,ie,ae,le,ce,he,de,ue,pe,ge,fe,f,m,l,a,i,s,function(e,{duration:t=300,origin:n="center"}){return{duration:t,css:e=>{const t=function(e){return--e*e*e*e*e+1}(e);return`\n          transform-origin: ${n};\n          transform: scale(${t});\n          opacity: ${t};\n        `}}},async function(){!I&&ue||(n(34,ue=!ue),ue?(n(35,pe=!1),await W(),A||ye||Ee(),await W(),setTimeout((()=>{m?.focusInput()}),0)):A||b&&(b.disconnect(),ye=!1))},Ie,Ce,async function(){if(A)return void Me();const e=ve;J&&!A&&Te(e),n(61,ve=ha()),_e(ve),n(33,de=[]),me="",n(37,fe=null),Ae(r,"assistant"),b&&(b.disconnect(),ye=!1);try{const t=await fetch(`${v}/reset-session?sessionId=${e}`,{method:"DELETE",headers:{"X-Agent-ID":K}});t.ok?console.log(`Session ${e} reset successfully on backend.`):console.error("Reset chat failed on backend:",await t.text())}catch(e){console.error("Error sending reset chat request:",e)}ue&&Ee()},y,v,x,$,E,X,K,Z,Y,J,ee,be,ve,g,function(e){V[e?"unshift":"push"]((()=>{f=e,n(38,f)}))},e=>Ce(e.detail),function(e){V[e?"unshift":"push"]((()=>{m=e,n(39,m)}))},function(e){ge=e,n(36,ge)},()=>n(35,pe=!0)]}Te(na,{displayFooterText:{},showPoweredBy:{type:"Boolean"}},[],[],!0);class pa extends _e{constructor(e){super(),we(this,e,ua,aa,i,{title:49,apiUrl:50,initialMessage:51,buttonIcon:1,ctaText:52,position:2,openInNewTab:3,enableUTM:4,startOpen:53,fullScreen:0,isDemo:5,closable:6,theme:7,userMessageBgColor:8,userMessageTextColor:9,assistantMessageBgColor:10,assistantMessageTextColor:11,humanAgentMessageBgColor:12,humanAgentMessageTextColor:13,chatButtonBgColor:14,chatButtonTextColor:15,ctaButtonBgColor:16,ctaButtonTextColor:17,ctaButtonHoverBgColor:18,ctaButtonHoverTextColor:19,headerBgColor:20,headerTextColor:21,footerText:54,showPoweredBy:22,agentId:55,context:56,cms:57,persistentSession:58,sessionExpiration:59,userMessageIcon:23,assistantMessageIcon:24,humanAgentMessageIcon:25,buttonImageUrl:26,buttonOverlayText:27,buttonOverlayDelay:28,predefinedQuestions:29,width:30,height:31,fontSize:32},sa,[-1,-1,-1])}get title(){return this.$$.ctx[49]}set title(e){this.$$set({title:e}),se()}get apiUrl(){return this.$$.ctx[50]}set apiUrl(e){this.$$set({apiUrl:e}),se()}get initialMessage(){return this.$$.ctx[51]}set initialMessage(e){this.$$set({initialMessage:e}),se()}get buttonIcon(){return this.$$.ctx[1]}set buttonIcon(e){this.$$set({buttonIcon:e}),se()}get ctaText(){return this.$$.ctx[52]}set ctaText(e){this.$$set({ctaText:e}),se()}get position(){return this.$$.ctx[2]}set position(e){this.$$set({position:e}),se()}get openInNewTab(){return this.$$.ctx[3]}set openInNewTab(e){this.$$set({openInNewTab:e}),se()}get enableUTM(){return this.$$.ctx[4]}set enableUTM(e){this.$$set({enableUTM:e}),se()}get startOpen(){return this.$$.ctx[53]}set startOpen(e){this.$$set({startOpen:e}),se()}get fullScreen(){return this.$$.ctx[0]}set fullScreen(e){this.$$set({fullScreen:e}),se()}get isDemo(){return this.$$.ctx[5]}set isDemo(e){this.$$set({isDemo:e}),se()}get closable(){return this.$$.ctx[6]}set closable(e){this.$$set({closable:e}),se()}get theme(){return this.$$.ctx[7]}set theme(e){this.$$set({theme:e}),se()}get userMessageBgColor(){return this.$$.ctx[8]}set userMessageBgColor(e){this.$$set({userMessageBgColor:e}),se()}get userMessageTextColor(){return this.$$.ctx[9]}set userMessageTextColor(e){this.$$set({userMessageTextColor:e}),se()}get assistantMessageBgColor(){return this.$$.ctx[10]}set assistantMessageBgColor(e){this.$$set({assistantMessageBgColor:e}),se()}get assistantMessageTextColor(){return this.$$.ctx[11]}set assistantMessageTextColor(e){this.$$set({assistantMessageTextColor:e}),se()}get humanAgentMessageBgColor(){return this.$$.ctx[12]}set humanAgentMessageBgColor(e){this.$$set({humanAgentMessageBgColor:e}),se()}get humanAgentMessageTextColor(){return this.$$.ctx[13]}set humanAgentMessageTextColor(e){this.$$set({humanAgentMessageTextColor:e}),se()}get chatButtonBgColor(){return this.$$.ctx[14]}set chatButtonBgColor(e){this.$$set({chatButtonBgColor:e}),se()}get chatButtonTextColor(){return this.$$.ctx[15]}set chatButtonTextColor(e){this.$$set({chatButtonTextColor:e}),se()}get ctaButtonBgColor(){return this.$$.ctx[16]}set ctaButtonBgColor(e){this.$$set({ctaButtonBgColor:e}),se()}get ctaButtonTextColor(){return this.$$.ctx[17]}set ctaButtonTextColor(e){this.$$set({ctaButtonTextColor:e}),se()}get ctaButtonHoverBgColor(){return this.$$.ctx[18]}set ctaButtonHoverBgColor(e){this.$$set({ctaButtonHoverBgColor:e}),se()}get ctaButtonHoverTextColor(){return this.$$.ctx[19]}set ctaButtonHoverTextColor(e){this.$$set({ctaButtonHoverTextColor:e}),se()}get headerBgColor(){return this.$$.ctx[20]}set headerBgColor(e){this.$$set({headerBgColor:e}),se()}get headerTextColor(){return this.$$.ctx[21]}set headerTextColor(e){this.$$set({headerTextColor:e}),se()}get footerText(){return this.$$.ctx[54]}set footerText(e){this.$$set({footerText:e}),se()}get showPoweredBy(){return this.$$.ctx[22]}set showPoweredBy(e){this.$$set({showPoweredBy:e}),se()}get agentId(){return this.$$.ctx[55]}set agentId(e){this.$$set({agentId:e}),se()}get context(){return this.$$.ctx[56]}set context(e){this.$$set({context:e}),se()}get cms(){return this.$$.ctx[57]}set cms(e){this.$$set({cms:e}),se()}get persistentSession(){return this.$$.ctx[58]}set persistentSession(e){this.$$set({persistentSession:e}),se()}get sessionExpiration(){return this.$$.ctx[59]}set sessionExpiration(e){this.$$set({sessionExpiration:e}),se()}get userMessageIcon(){return this.$$.ctx[23]}set userMessageIcon(e){this.$$set({userMessageIcon:e}),se()}get assistantMessageIcon(){return this.$$.ctx[24]}set assistantMessageIcon(e){this.$$set({assistantMessageIcon:e}),se()}get humanAgentMessageIcon(){return this.$$.ctx[25]}set humanAgentMessageIcon(e){this.$$set({humanAgentMessageIcon:e}),se()}get buttonImageUrl(){return this.$$.ctx[26]}set buttonImageUrl(e){this.$$set({buttonImageUrl:e}),se()}get buttonOverlayText(){return this.$$.ctx[27]}set buttonOverlayText(e){this.$$set({buttonOverlayText:e}),se()}get buttonOverlayDelay(){return this.$$.ctx[28]}set buttonOverlayDelay(e){this.$$set({buttonOverlayDelay:e}),se()}get predefinedQuestions(){return this.$$.ctx[29]}set predefinedQuestions(e){this.$$set({predefinedQuestions:e}),se()}get width(){return this.$$.ctx[30]}set width(e){this.$$set({width:e}),se()}get height(){return this.$$.ctx[31]}set height(e){this.$$set({height:e}),se()}get fontSize(){return this.$$.ctx[32]}set fontSize(e){this.$$set({fontSize:e}),se()}}Te(pa,{title:{},apiUrl:{},initialMessage:{},buttonIcon:{},ctaText:{},position:{},openInNewTab:{type:"Boolean"},enableUTM:{type:"Boolean"},startOpen:{type:"Boolean"},fullScreen:{type:"Boolean"},isDemo:{type:"Boolean"},closable:{type:"Boolean"},theme:{},userMessageBgColor:{},userMessageTextColor:{},assistantMessageBgColor:{},assistantMessageTextColor:{},humanAgentMessageBgColor:{},humanAgentMessageTextColor:{},chatButtonBgColor:{},chatButtonTextColor:{},ctaButtonBgColor:{},ctaButtonTextColor:{},ctaButtonHoverBgColor:{},ctaButtonHoverTextColor:{},headerBgColor:{},headerTextColor:{},footerText:{},showPoweredBy:{type:"Boolean"},agentId:{},context:{},cms:{},persistentSession:{type:"Boolean"},sessionExpiration:{},userMessageIcon:{},assistantMessageIcon:{},humanAgentMessageIcon:{},buttonImageUrl:{},buttonOverlayText:{},buttonOverlayDelay:{},predefinedQuestions:{},width:{},height:{},fontSize:{}},[],[],!0),(async()=>{try{await ys;const e=document.createElement("div"),t=document.currentScript;t&&t.parentNode?t.parentNode.insertBefore(e,t):(console.warn("Could not find current script tag to insert widget. Appending to body."),document.body.appendChild(e));const n=t?t.getAttribute("data-api-url"):null,s=t?t.getAttribute("data-agent-id"):"xyz",r=!!t&&"true"===t.getAttribute("data-is-demo");let o={};if(!r&&n)try{const h=await fetch(`${n}/preview/${s}`);if(h.ok){const u=await h.json();o=Object.keys(u).reduce(((e,t)=>{const n=t.replace(/_(\w)/g,((e,t)=>t.toUpperCase()));let s=u[t];return["fontSize","width","height"].includes(n)&&"number"==typeof s&&(s=`${s}px`),e[n]=s,e}),{})}else console.warn(`Failed to fetch remote config: ${h.status}`)}catch(p){console.warn("Error fetching remote config:",p)}const i={...{title:null,apiUrl:null,initialMessage:null,buttonIcon:"💬",buttonImageUrl:null,buttonOverlayText:null,buttonOverlayDelay:5e3,predefinedQuestions:[],ctaText:null,openInNewTab:!0,enableUTM:!0,position:"bottom-right",persistentSession:!1,sessionExpiration:24,theme:"light",userMessageIcon:null,assistantMessageIcon:null,userMessageBgColor:"#e0e0e0",userMessageTextColor:"#000000",assistantMessageBgColor:"#f8f8f8",assistantMessageTextColor:"#000000",humanAgentMessageBgColor:"#e0e0e0",humanAgentMessageTextColor:"#000000",chatButtonBgColor:"#000000",chatButtonTextColor:"#ffffff",ctaButtonBgColor:"#f8f8f8",ctaButtonTextColor:"#000000",ctaButtonHoverBgColor:null,ctaButtonHoverTextColor:null,headerBgColor:null,headerTextColor:null,footerText:null,showPoweredBy:!0,agentId:"xyz",context:null,cms:"",startOpen:!1,fullScreen:!1,width:"340px",height:"485px",fontSize:"16px",isDemo:!1,closable:!0},...o};function a(e,n){const s=t?t.getAttribute(e):null;return null===s?n:"true"===s.toLowerCase()||"false"!==s.toLowerCase()&&s}function l(e){const n=t?t.getAttribute("data-position"):null;return["top-left","top-right","bottom-left","bottom-right"].includes(n)?n:e}const c=e.attachShadow({mode:"open"});new pa({target:c,props:{title:a("data-title",i.title),apiUrl:a("data-api-url",i.apiUrl),initialMessage:a("data-initial-message",i.initialMessage),buttonIcon:a("data-button-icon",i.buttonIcon),buttonImageUrl:a("data-button-image-url",i.buttonImageUrl),buttonOverlayText:a("data-button-overlay-text",i.buttonOverlayText),buttonOverlayDelay:a("data-button-overlay-delay",i.buttonOverlayDelay),predefinedQuestions:(()=>{const e=a("data-predefined-questions",i.predefinedQuestions);if("string"==typeof e)try{const t=JSON.parse(e);return Array.isArray(t)?t:i.predefinedQuestions}catch(e){return console.warn("Could not parse data-predefined-questions. It should be a valid JSON array string.",e),i.predefinedQuestions}return Array.isArray(e)?e:[]})(),ctaText:a("data-cta-text",i.ctaText),openInNewTab:a("data-open-in-new-tab",i.openInNewTab),enableUTM:a("data-enable-utm",i.enableUTM),position:l(i.position),persistentSession:a("data-persistent-session",i.persistentSession),sessionExpiration:a("data-session-expiration",i.sessionExpiration),theme:a("data-theme",i.theme),userMessageIcon:a("data-user-message-icon",i.userMessageIcon),assistantMessageIcon:a("data-assistant-message-icon",i.assistantMessageIcon),humanAgentMessageIcon:a("data-human-agent-message-icon",i.humanAgentMessageIcon),userMessageBgColor:a("data-user-message-bg-color",i.userMessageBgColor),userMessageTextColor:a("data-user-message-text-color",i.userMessageTextColor),assistantMessageBgColor:a("data-assistant-message-bg-color",i.assistantMessageBgColor),assistantMessageTextColor:a("data-assistant-message-text-color",i.assistantMessageTextColor),humanAgentMessageBgColor:a("data-human-agent-message-bg-color",i.humanAgentMessageBgColor),humanAgentMessageTextColor:a("data-human-agent-message-text-color",i.humanAgentMessageTextColor),chatButtonBgColor:a("data-chat-button-bg-color",i.chatButtonBgColor),chatButtonTextColor:a("data-chat-button-text-color",i.chatButtonTextColor),ctaButtonBgColor:a("data-cta-button-bg-color",i.ctaButtonBgColor),ctaButtonTextColor:a("data-cta-button-text-color",i.ctaButtonTextColor),ctaButtonHoverBgColor:a("data-cta-button-hover-bg-color",i.ctaButtonHoverBgColor),ctaButtonHoverTextColor:a("data-cta-button-hover-text-color",i.ctaButtonHoverTextColor),headerBgColor:a("data-header-bg-color",i.headerBgColor),headerTextColor:a("data-header-text-color",i.headerTextColor),footerText:a("data-footer-text",i.footerText),showPoweredBy:a("data-show-powered-by",i.showPoweredBy),agentId:a("data-agent-id",i.agentId),context:a("data-context",i.context),cms:a("data-cms",i.cms),startOpen:a("data-start-open",i.startOpen),fullScreen:a("data-full-screen",i.fullScreen),width:a("data-width",i.width),height:a("data-height",i.height),fontSize:a("data-font-size",i.fontSize),isDemo:a("data-is-demo",i.isDemo),closable:a("data-closable",i.closable)}})}catch(d){console.error("Error initializing chat widget:",d)}})()}();
//# sourceMappingURL=chat-widget.min.js.map
